swagger: '2.0'
info:
  title: ConnectAPI Acceptance 
  description: |
    **Preliminary Note:** This document aims at describing how to use the Amadeus JSON API for core Payment *Operation* management, dealing with payment transactions.
    Amadeus APIs comply with Amadeus REST/JSON Rules & Guideline v1.3 and are based on *application/vnd.amadeus+json* [media type](https://www.iana.org/assignments/media-types/media-types.xhtml). For further details please refer to [developers.amadeus.com](https://developers.amadeus.com).

    ## Resource: *Operations*
    The main payment resource used here is the '*Operations*' resource. An *Operation* is either a payment operation implying or not a direct move of funds between a payer and a payee, or an operation related to a payment instrument (an instrument order or an instrument validation). An *Operation* is therefore an abstract resource that may be one of the following: *Authorization*, *Reversal*, *Capture*, *Refund*, or *Instrument Order*.

    ### Payment Operation ontology

    #### *Authorization*
    An *Authorization* is usually the first transaction performed during the acceptance stage of a payment, i.e., an agreement on some money to be exchanged, at once or later, between two parties: the individual or corporate *payer* and the *payee*. When successful, it usually results in the amount at stake being blocked for a limited period of time on the payer's account.

    #### *Reversal*
    A *Reversal* is an optional transaction which must be consecutive to a successful authorization performed during the acceptance stage of a payment. It consists in partially or fully reversing the previously authorized amount.

    #### *Capture* & *Refund*
    *Capture* and *Refund* are operations performed during the clearing stage of a payment, i.e., when service is sold and money has to be transferred, and vice versa. Depending on the payment, *Capture* could be immediate at *Authorization* time when successful. This is what is called 1-step or single-message payment. In that case, the *Authorization* prevails and there is no use of any separate *Capture*. Otherwise, money actually starts to move only when the act of *Capture* is confirmed, which is called 2-step or dual-message payment choreography. When reimbursement is due, a *Refund* will be issued from the *payee* to the *payer*.

    #### *Instrument Order*
    The main payment resource used here is the 'Instrument Order'. This is an operation to request a payment instrument to your system which will be used to pay a *Merchant* on behalf of one of its *clients*. During this operation, the *client* will be redirected to one of your web pages in order to contract a 'Buy Now Pay Later' payment solution. The way the *client* pays this solution is out of scope of this API.

    ## Quickstart Guide
    ### 1. Merchant account setup
    Outpayce sends payment operations on behalf of merchants. A merchant is identified in your system by a *MERCHANT_ACCOUNT*. It may even be attributed a MERCHANT_LOGIN with an associated MERCHANT_PASSWORD.

    ### 2. Authorization
    At the end of a fruitful shopping session, the client of the merchant could choose to pay by payment card or an alternative payment method.

    #### 2.1. Authorization - Payment Card
    When the client agrees to pay with their payment card _4000000000000001_ for an amount of _123.45€_, Outpayce collects the card information and sends a request to your system such as:
    ```
    PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
    Content-Type: application/vnd.amadeus+json
    ...

    {
      "data": {
        "id": "authorizationId",
        "amount": {
          "value": "123.45",
          "currencyCode": "EUR"
        },
        "authorizationType": "AUTHORIZATION_ONLY",
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "cardNumber": "4000000000000001",
          "cvv": "123",
          "expiryDate": "2024-12"
        },
        "operationContext": {
          "merchantAccount": {
            "name": "MERCHANT_ACCOUNT"
          },
          "acquirerInformation": {
            "acquirerBin": "ACQUIRER_BIN"
          }
        }
      }
    }
    ```

    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 201 Created
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json

    {
      "data": {
        "id": "authorizationId",
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "maskedCardNumber": "400000------0001"
          },
        "approvalCode": "APPROVAL_CODE",
        "timestamp": "2022-11-28T13:37:00Z"
      }
    }
    ```
    Usually, after this successful operation, the order is confirmed and the checkout process ends here.

    #### 2.2. Multi-steps Authorization
    ##### 2.2.1 Synchronous Alternative Payment Methods with redirection
    When the client agrees to pay with an alternative payment method like _Paypal_ for an amount of _123.45€_, Outpayce captures the selected alternative payment method, collects the required information and sends a request to your system such as:
    ```
    PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
    Content-Type: application/vnd.amadeus+json
    ...
    {
       "data":{
          "id":"{authorizationId}",
          "method":"AMOP",
          "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
          },
         "instrument": {
                "paymentSystem": "PAYPAL"
            },
          "paymentMerchantReference": "MERCHANT_REFERENCE",
          "authorizationType": "AUTHOR_AND_CAPTURE",
          "timestamp":"2032-11-28T13:37:00Z",
          "pointOfInteraction":{
             "location": {
                "address": {
                   "countryCode":"IN"
                }
              }  
             },
          "operationContext":{
             "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "MERCHANT_LOGIN",
                "password":{
                   "payload": "MERCHANT_PASSWORD"
                }
             },
            "links": [
              {
                "rel": "default-callback",
                "href": "https://mysite.amadeus.com/landingpage/uniquereference123/confirm"
               },
              {
                 "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
               }
            ],
            "device": {
              "activeWebBrowser": {
                  "ietfLanguageTag": "fr-CA"                    
              }
            }
          }
       }
     }

    ```
    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 202 Accepted
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json
    {
    "data": {
        "externalId": "EXTERNAL_ID",
        "status": "ACCEPTED", 
        "timestamp": "2032-11-28T14:59:55Z",
        "targetPayloads": [
          {
            "href": "REDIRECTION_URL",
            "method": "POST",
             "formPayload": [
              {
                "name": "amount",
                "value": "123.45"
              },
              {
                "name": "currencyCode",
                "value": "EUR"
              }
            ]
          }
        ]
      }
     } 
      ```

    In this response example, _REDIRECTION_URL_ is the landing page to redirect the payer in order to complete the payment.

    *With regards to Alternative Payment transactions, this is the minimum amount of data Outpayce expects to receive in the response. Without at least these fields, Outpayce is not be able to enable the merchant to perform the redirection.*
     
    *After a successful redirection by the merchant, and completion of payment by the payer, Outpayce expects you to redirect the payer back to the merchant along with additional parameters. Please refer to the "Provider API Frontend Notification.md" file provided in _assests_ folder.*
        
    ##### 2.2.1.1 Synchronous Alternative Payment Methods - Resumption
    In the event that Outpayce has not received the final status of the authorization via "Webhook" (for more details about this step, please refer to the Payment Operations Events swagger.) and if after reception of the "Frontend Notification" (for more details about this step, please refer to the Interface Control Document), is unable to understand it, Outpayce will contact your system using an authorization resumption request to retrieve it.

    The request is as follows:
    ```
    POST https://your-host-name/outpayce/v1/authorizations/{authorizationId}/resumption
    Content-Type: application/vnd.amadeus+json
    ```

    Your application parses the request and after processing it, returns a response such as:

    ```
    HTTP/1.1 201 Created
    Content-Type: application/vnd.amadeus+json  
    {
        "data": {
            "id": "{authorizationId}",
            "externalId": "EXTERNAL_ID",
            "status": "AUTHORIZED",
            "timestamp": "2032-11-28T23:59:55Z"
        }
    }  
    ```
    After the operation is successful, the order is confirmed and the checkout process ends here.

    ##### 2.2.2 Asynchronous Alternative Payment Methods with web redirection:

    When the client agrees to pay with an Asynchronous alternative payment method with web redirection like Multicaixa for an amount of _123.45€_, Outpayce captures the selected alternative payment method, collects the required information and sends a request to your system with a time-limit until when the order would be valid such as:
    ```
    PUT https://your-host-name/outpayce/v1/authorizations/{id}
    Content-Type: application/vnd.amadeus+json   
    {
      "data": {
        "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
        "method": "AMOP",
        "purposeOfOperation": {
          "validUntil": "2023-05-23T23:59:55Z",
          "sales": [
            {
              "reference": "MERCHANT_REFERENCE",
              "referenceOwner": "MERCHANT",
              "referenceType": "PNR",
              "salesItems": [
                {
                  "category": "FLIGHT",
                  "flightSalesDetails": {
                    "flightLegs": [
                      {
                        "flightNumber": "6X12456A",
                        "departureTime": "2023-06-30T11:40:00Z",
                        "departureAirportCode": "HAN",
                        "arrivalTime": "2023-06-30T13:40:00Z",
                        "arrivalAirportCode": "SGN",
                        "carrierCode": "6X",
                        "serviceClass": "L"
                      }
                    ],
                    "passenger": {
                      "name": {
                        "firstName": "MARIE",
                        "lastName": "JACOB"
                      },
                      "flightPassengerType": "ADULT"
                    }
                  }
                }
              ]
            }
          ]
        },
        "pointOfInteraction": {
          "location": {
            "address": {
              "countryCode": "IN"
            }
          }
        },
        "timestamp": "2023-05-22T23:59:55Z",
        "operationContext": {
          "merchantAccount": {
            "name": "MERCHANT_ACCOUNT",
            "login": "MERCHANT_LOGIN",
            "password": {
              "payload": "MERCHANT_PASSWORD"
            }
          },
          "links": [
            {
                "rel": "default-callback",
                "href": "https://mysite.amadeus.com/landingpage/uniquereference123/confirm"
               },
            {
              "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/{operation-collection}/{operation-id}/events",
              "rel": "webhook"
            }
          ],
          "device": {
            "activeWebBrowser": {
              "ietfLanguageTag": "en-IN"
            }
          }
        },
        "amount": {
          "value": "45230.45",
          "currencyCode": "INR"
        },
        "instrument": {
          "paymentSystem": "MULTICAIXA"
        },
        "paymentMerchantReference": "merchantReference",
        "authorizationType": "AUTHOR_AND_CAPTURE"
      }
    }
    ```
    The validUntil field indicates the time until which the sales reference remains valid. In other words, the merchant will hold the sales item until this time. If the customer is unable to complete the payment within this period, the sales item will be cancelled.

    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 202 Accepted
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json
    {
    "data": {
        "externalId": "EXTERNAL_ID",
        "status": "ACCEPTED", 
        "timestamp": "2032-11-28T14:59:55Z",
        "targetPayloads": [
          {
            "href": "REDIRECTION_URL",
            "method": "POST",
             "formPayload": [
              {
                "name": "amount",
                "value": "123.45"
              },
              {
                "name": "currencyCode",
                "value": "EUR"
              }
            ]
          }
        ]
      }
     } 
    ```

    In this response example, _REDIRECTION_URL_ is the landing page to redirect the payer to in order to complete the payment.

    *With regards to Alternative Payment transactions, this is the minimum amount of data Outpayce expects to receive in the response. Without at least these fields, Outpayce is not be able to enable the merchant to perform the redirection.*
     
    *After a successful redirection by the merchant, and completion of payment by the payer, Outpayce expects you to redirect the payer back to the merchant along with additional parameters. Please refer to the "Provider API Frontend Notification.md" file provided in _assests_ folder.*
        
    ##### 2.2.2.1 Asynchronous Alternative Payment Methods with web redirection - Resumption
    If Outpayce does not receive the final authorization status via the "Webhook" (refer to the Payment Operations Events swagger for details), and cannot understand the "Frontend Notification" (refer to the Interface Control Document for details), Outpayce will contact your system using an authorization resumption request to retrieve it.

    The request is as follows:
    ```
    POST https://your-host-name/outpayce/v1/authorizations/{authorizationId}/resumption
    Content-Type: application/vnd.amadeus+json
    ```
    Your application parses the request and after processing it, returns a response as below:

    In case the authorization is not yet completed, the PSP would return a response such as:
    ```
    HTTP/1.1 202 Accepted
    Content-Type: application/vnd.amadeus+json  
    {
        "data": {
            "id": "{authorizationId}",
            "externalId": "EXTERNAL_ID",
            "status": "PENDING",
            "timestamp": "2032-11-28T23:59:55Z"
        }
    }  
    ```
    Once the authorization is successful, the PSP would return a response such as:
    ```
    HTTP/1.1 201 Created
    Content-Type: application/vnd.amadeus+json  
    {
        "data": {
            "id": "{authorizationId}",
            "externalId": "EXTERNAL_ID",
            "status": "AUTHORIZED",
            "timestamp": "2032-11-28T23:59:55Z"
        }
    }  
    ```

    After the operation is successful, the order is confirmed and the checkout process ends here.

    ##### 2.2.3 Asynchronous Alternative Payment Methods without web redirection 
    When the client agrees to pay with an asynchronous alternative payment method without web redirection for an amount of _123.45€_, Outpayce captures the selected alternative payment method, collects the required information and sends a request to your system with a time-limit until when the order would be valid such as:

    ```
    PUT https://your-host-name/outpayce/v1/authorizations/{id}
    Content-Type: application/vnd.amadeus+json   
    {
      "data": {
        "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
        "method": "AMOP",
        "purposeOfOperation": {
          "validUntil": "2023-05-23T23:59:55Z",
          "sales": [
            {
              "reference": "MERCHANT_REFERENCE",
              "referenceOwner": "MERCHANT",
              "referenceType": "PNR",
              "salesItems": [
                {
                  "category": "FLIGHT",
                  "flightSalesDetails": {
                    "flightLegs": [
                      {
                        "flightNumber": "6X12456A",
                        "departureTime": "2023-06-30T11:40:00Z",
                        "departureAirportCode": "HAN",
                        "arrivalTime": "2023-06-30T13:40:00Z",
                        "arrivalAirportCode": "SGN",
                        "carrierCode": "6X",
                        "serviceClass": "L"
                      }
                    ],
                    "passenger": {
                      "name": {
                        "firstName": "MARIE",
                        "lastName": "JACOB"
                      },
                      "flightPassengerType": "ADULT"
                    }
                  }
                }
              ]
            }
          ]
        },
        "pointOfInteraction": {
          "location": {
            "address": {
              "countryCode": "IN"
            }
          }
        },
        "timestamp": "2023-05-22T23:59:55Z",
        "operationContext": {
          "merchantAccount": {
            "name": "MERCHANT_ACCOUNT",
            "login": "MERCHANT_LOGIN",
            "password": {
              "payload": "MERCHANT_PASSWORD"
            }
          },
          "links": [
            {
              "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/{operation-collection}/{operation-id}/events",
              "rel": "webhook"
            }
          ],
          "device": {
            "activeWebBrowser": {
              "ietfLanguageTag": "en-IN"
            }
          }
        },
        "amount": {
          "value": "45230.45",
          "currencyCode": "INR"
        },
        "instrument": {
          "paymentSystem": "NAPAS_PAY_LATER"
        },
        "paymentMerchantReference": "merchantReference",
        "authorizationType": "AUTHOR_AND_CAPTURE"
      }
    }
    ```
    The validUntil field indicates the time until which the sales reference remains valid. In other words, the merchant will hold the sales item until this time. If the customer is unable to complete the payment within this period, the sales item will be cancelled.

    Your application parses the request and after processing it, generates a reference and returns it in the externalId in the response message. Below is the example:
      ```
    HTTP/1.1 202 Accepted
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json
    {
    "data": {
        "externalId": "EXTERNAL_ID",
        "status": "ACCEPTED", 
        "timestamp": "2032-11-28T14:59:55Z"
      }
    } 
     
    ```

    ##### 2.2.3.1 Asynchronous Alternative Payment Methods without web redirection - Resumption
    If Outpayce does not receive the final authorization status via the "Webhook" (refer to the Payment Operations Events swagger for details), Outpayce will contact your system using an authorization resumption request to retrieve it.

    The request is as follows:
    ```
    POST https://your-host-name/outpayce/v1/authorizations/{authorizationId}/resumption
    Content-Type: application/vnd.amadeus+json
    ```
    Your application parses the request and after processing it, returns a response as below:

    In case the authorization is not yet completed, the PSP would return a response such as:
    ```
    HTTP/1.1 202 Accepted
    Content-Type: application/vnd.amadeus+json  
    {
        "data": {
            "id": "{authorizationId}",
            "externalId": "EXTERNAL_ID",
            "status": "PENDING",
            "timestamp": "2032-11-28T23:59:55Z"
        }
    }  
    ```
    Once the authorization is successful, the PSP would return a response such as:
    ```
    HTTP/1.1 201 Created
    Content-Type: application/vnd.amadeus+json  
    {
        "data": {
            "id": "{authorizationId}",
            "externalId": "EXTERNAL_ID",
            "status": "AUTHORIZED",
            "timestamp": "2032-11-28T23:59:55Z"
        }
    }  
    ```
    After the operation is successful, the order is confirmed and the checkout process ends here.
      
    ### 3. Reversal
    The client of the merchant decides to fully cancel the order. Outpayce sends a reversal request to cancel the authorization to your system such as:
      ```
      PUT https://{your-host-name}/outpayce/v1/reversals/{reversalId} HTTP/1.1
      Content-Type: application/vnd.amadeus+json
      ...
      
      {
          "data": {
              "parentOperationId": "{authorizationId}",
              "id": "{reversalId}",
              "amount": {
                  "value": "123.45",
                  "currencyCode": "EUR"
              },
              "method": "CARD",
              "card": {
                  "vendorCode": "VI",
                  "cardNumber": "4000000000000001",
                  "expiryDate": "2024-12"
              },
              "approvalCode": "APPROVAL_CODE",
              "operationContext": {
                  "merchantAccount": {
                      "name": "MERCHANT_ACCOUNT"
                  },
                  "acquirerInformation": {
                      "acquirerBin": "ACQUIRER_BIN"
                  }
              }
          }
      }
      ```

    Your application parses the request and after processing it, returns a response such as:
      ```
      HTTP/1.1 201 Created
      Location: https://{your-host-name}/outpayce/v1/reversals/{reversalId}
      Content-Type: application/vnd.amadeus+json
      
      {
          "data": {
              "parentOperationId": "{authorizationId}",
              "id": "{reversalId}",
              "method": "CARD",
              "card": {
                  "vendorCode": "VI",
                  "maskedCardNumber": "400000------0001"
              },
              "timestamp": "2022-11-28T13:37:00Z"
          }
      }
      ```

    ### 4. Capture
    When the sales is confirmed, contract is set and fulfillment starts. At that moment, payment is cleared against the sales. 
    If the previous authorization was only "blocking" the payer's balance (i.e. authorizationType was "AUTHORIZATION_ONLY"), Outpayce sends to your system an extra request to confirm and ask the acquiring bank to _capture_ the payment corresponding to what was eventually sold. This extra request is such as:
    ```
    PUT https://{your-host-name}/outpayce/v1/captures/{captureId} HTTP/1.1
    Content-Type: application/vnd.amadeus+json
    ...

    {
      "data": {
        "parentOperationId": "authorizationId",
        "id": "captureId",
        "amount": {
          "value": "123.45",
          "currencyCode": "EUR"
        },
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "cardNumber": "4000000000000001",
          "expiryDate": "2024-12"
        },
        "approvalCode": "APPROVAL_CODE",
        "operationContext": {
          "merchantAccount": {
            "name": "MERCHANT_ACCOUNT"
          },
          "acquirerInformation": {
            "acquirerBin": "ACQUIRER_BIN"
          },
          "links": [
              {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/captures/{captureId}/events"
              }
          ]
        }
      }
    }
    ```

    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 201 Created
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json

    {
      "data": {
        "parentOperationId": "authorizationId",
        "id": "captureId",
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "maskedCardNumber": "400000------0001"
          },
        "status": "RECEIVED",
        "timestamp": "2022-11-28T15:18:00Z"
      }
    }
    ```
    *With regards to Credit Card transactions, this is the minimum amount of data Outpayce expects to receive in the response. Without at least these fields, Outpayce will not be able to process the Capture response.*
     
     *With regards to Alternative Payment methods, Outpayce can only support APMs that eligible for Authorization & Capture at the same time, i.e. the previous authorization was not only "blocking" the payer's balance, but as well requesting the acquiring bank to _capture_ the payment corresponding to what was eventually sold, i.e., authorizationType was "AUTHORIZATION_AND_CAPTURE"*


    ### 5. Refund
    In case of some after-sales case ending up in the merchant reimbursing the payer, Outpayce will send to your system a request such as:

    ## 5.1 Refund - Card 
    ```
    PUT https://{your-host-name}/outpayce/v1/refunds/{refundId} HTTP/1.1
    Content-Type: application/vnd.amadeus+json
    ...

    {
      "data": {
        "parentOperationId": "captureId",
        "id": "refundId",
        "amount": {
          "value": "75.24",
          "currencyCode": "EUR"
        },
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "cardNumber": "4000000000000001",
          "expiryDate": "2024-12"
        },
        "operationContext": {
          "merchantAccount": {
            "name": "MERCHANT_ACCOUNT"
          },
          "acquirerInformation": {
            "acquirerBin": "ACQUIRER_BIN"
          },
          "links": [
              {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/refunds/{refundId}/events"
              }
          ]
        }
      }
    }
    ```


    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 201 Created
    Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
    Content-Type: application/vnd.amadeus+json

    {
      "data": {
        "parentOperationId": "captureId",
        "id": "refundId",
        "method": "CARD",
        "card": {
          "vendorCode": "VI",
          "maskedCardNumber": "400000------0001"
          },
        "status": "RECEIVED",
        "timestamp": "2022-11-29T11:22:00Z"
      }
    }
    ```
     *With regards to Credit Card transactions, this is the minimum amount of data Outpayce expects to receive in the response. Without at least these fields, Outpayce will not be able to process the Refund response.*
     
     ### 5.2 Refund - Alternative Payment methods
    ```
    PUT https://{your-host-name}/outpayce/v1/refunds/{refundId} HTTP/1.1
    Content-Type: application/vnd.amadeus+json
    ...


    {
      "data": {
        "parentOperationId": "authorizationId",
        "id": "refundId",
        "amount": {
          "value": "75.24",
          "currencyCode": "EUR"
        },
        "timestamp": "2023-06-22T20:09:21Z",
        "method": "AMOP",
        "instrument": {
          "paymentSystem": "PAYPAL"
        },
        "operationContext": {
          "merchantAccount": {
              "name": "MERCHANT_ACCOUNT",
              "login": "MERCHANT_LOGIN",
              "password": {
                 "payload":"MERCHANT_PASSWORD"
                } 
            }, 
          "links": [
              {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/refunds/{refundId}/events"
              }
          ]
        }
      }
    }
    ```

    Your application parses the request and after processing it, returns a response such as:
    ```
    HTTP/1.1 201 Created
    Location: https://{your-host-name}/outpayce/v1/refunds/{refundId}
    Content-Type: application/vnd.amadeus+json

      {
      "data": {
        "parentOperationId": "authorizationId",
        "id": "refundId",
        "method": "AMOP",
        "status": "RECEIVED",
        "timestamp": "2022-11-29T11:22:00Z"
      }
    }
    ```

     *With regards to Alternative Payment methods, this is the minimum amount of data Outpayce expects to receive in the response. Without at least these fields, Outpayce will not be able to process the Refund response.*

    ### 6. Instrument Order 
    ### Instrument Order creation
    At the end of a fruitful shopping session, the client of the merchant agrees to pay with BNPL payment method for an amount of *123.45USD*. Outpayce sends a request to your system such as:

    ```
     PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
     Content-Type: application/vnd.amadeus+json
     ...
      {
      "data": {
        "id": "instrumentorderId",
        "method": "VIRTUALCARD",
        "paymentMerchantReference": "VEPQQBAPUL301474106055",
        "purposeOfOperation": {
          "sales": [
            {
              "reference": "RECLOC",
              "referenceOwner": "6X",
              "referenceType": "PNR",
              "salesItems": [
                {
                  "category": "FLIGHT",
                  "flightSalesDetails": {
                    "flightLegs": [
                      {
                        "flightNumber": "6X12456A",
                        "departureTime": "2023-06-30T11:40:00Z",
                        "departureAirportCode": "DEL",
                        "arrivalTime": "2023-06-30T13:40:00Z",
                        "arrivalAirportCode": "YYZ",
                        "carrierCode": "6X"
                      }
                    ],
                    "passenger": {
                      "name": {
                        "firstName": "MARIE",
                        "lastName": "JACOB"
                      },
                      "flightPassengerType": "ADULT"
                    }
                  }
                }
              ]
            }
          ]
        },
        "pointOfInteraction": {
          "location": {
            "address": {
              "countryCode": "US"
            }
          }
        },
        "timestamp": "2023-05-22T23:59:55Z",
        "operationContext": {
          "merchantAccount": {
            "name": "AIRLINE SIX",
            "login": "merchant.123456",
            "password": {
              "payload": "1234567890payloadqwerty"
            }
          },
          "links": [
            {
              "rel": "default-callback",
              "href": "LANDING_PAGE"
            },
            {
              "rel": "fail-callback",
              "href": "FAIL_CALLBACK_URL"
            }
          ],
          "device": {
            "activeWebBrowser": {
              "ietfLanguageTag": "en-US"
            }
          }
        },
        "amount": {
          "value": "123.45",
          "currencyCode": "USD"
        }
      }
    }
    ```   
        
    Your application parses the request and after processing it returns a response such as:

    ```
        HTTP/1.1 202 Accepted
        Content-Type: application/vnd.amadeus+json
        
       {
      "data": {
        "externalId": "1WX80207GX642472G",
        "status": "ACCEPTED",
        "timestamp": "2023-05-22T23:59:55Z",
        "targetPayloads": [
          {
            "href": "REDIRECTION_WEB_PAGE",
            "method": "POST",
            "formPayload": [
              {
                "name": "param1",
                "value": "value1"
              },
              {
                "name": "param2",
                "value": "value2"
              }
            ],
            "links": [
              {
                "rel": "resumption",
                "href": "https://{your-host-name}/v1/instrument-orders/{id}/resumption"
              }
            ]
          }
        ]
      }
    }  
     ```
    After this succesful answer, the client is redirected to the *REDIRECTION_WEB_PAGE* in order to contract a funding with you. Once the contract is established, the client is redirected back to the *LANDING_PAGE*. In case the client cancels the payment or in case of any failure, the client should be redirected back to the *FAIL_CALLBACK_URL*, if provided in the request.

    ### Instrument Order Resumption
    After the checkout process described in the previous section, Outpayce contacts your system to resume the instrument order. The request will be the following:

    ```
        POST https://{your-host-name}/v1/instrument-orders/{id}/resumption HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        
        {}
        
    ```    

    Depending on whether the instrument details are ready on your end at the time of the reception of the resumption request, your answer differs.

    #### Instrument details ready

    Your application parses the request and after processing it, returns a response including the intrument details such as:

    ```
    HTTP/1.1 201 Created
    Location: https://{your-host-name}/v1/instrument-orders/{id}
    Content-Type: application/vnd.amadeus+json
        
    {
      "data": {
        "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
        "externalId": "EXTERNAL_ID",
        "status": "CREATED",
        "timestamp": "2023-05-22T23:59:55Z",
        "virtualCard": {
          "vendorCode": "TP",
          "cardNumber": "1871000000000001",
          "cvv": "123",
          "expiryDate": "2024-12",
          "limitations": {
            "numberOfPurchases": 1
          }
        }
      }
    }  
     ```
    #### Instrument Details not ready   
    Your application parses the request and after processing it returns a response as below:
    ```
    HTTP/1.1 202 Accepted
    Content-Type: application/vnd.amadeus+json  
    {
      "data": {
        "id": "{instrumentorderId}",
        "externalId": "externalId",
        "status": "PENDING",
        "timestamp": "2023-05-22T23:59:55Z",
        "paymentMerchantReference": "merchantReference"
      }
    }

     ```

    ## API considerations

    ### application/vnd.amadeus+json overall structure
    Each request/response body is enclosed in a JSON envelope. The set of root level keys of that envelope is limited and support the API consumer pre-interactions. The main root level key is _data_ in input or in successful responses, and _errors_ for failing responses.

    Here is an example of a successful response body:

        {
            "warnings": [
                ...
            ],
            "data": {
                ...
            },
            "dictionaries": {
                ...
            },
            "included": [
                ...
            ],
            "meta": {
                ...
            }
        }

    And here is an example of a successful collection response body:

        {
            "warnings": [
                ...
            ],
            "data": [
                ...
            ],
            "dictionaries": {
                ...
            },
            "included": [
                ...
            ],
            "meta": {
                ...
            },
        }

    Please note that request bodies are not expected to contain warnings or errors.

    Here would be an example of a error response body:

        {
            "warnings": [
                ...
            ],
            "errors": [
                ...
            ],
            "meta": {
                ...
            }
        }

    Warnings are non-blocking issues encountered during processing. Errors are functionally blocking issues preventing a successful processing.


    ### Semantic HTTP statuses

    In this API, HTTP statuses are semantically applied.

    Here are the main successful ones to consider (non-exhaustive list):
    - **200 OK.** Processing of the operation is successful.
    - **201 Created - FREQUENT business functional success.** Request was processed and resource instance was properly created.
    - **202 Accepted - FREQUENT business functional success.** Request was received but processing of the operation is still ongoing (e.g. asynchronous processing).

    And here are the main error categories returned (non-exhaustive list):
    - **409 Conflict.** Conflicting operation, for instance due to concurrent long action or locked resource.
    - **422 Unprocessable Entity - FREQUENT business functional failure.** Unprocessable request, mostly due to business context. 
    - **424 Failed Dependency - FREQUENT business functional failure.** Business functional rejection from an external party downstream.
    - **502 Bad Gateway.** Communication error in an external party downstream.
    - **504 Gateway Timeout.** External party timeout error.  
  contact:
    name: Payment Open Platform
    url: 'https://outpayce.com'
    email: payment.support@amadeus.com
  version: 1.6.A20250801
host: your-host-name
basePath: /outpayce/v1
schemes:
  - https
paths:
  '/instrument-orders/{id}/resumption':
    post:
      tags:
        - Instrument
      summary: ''
      description: |-
        This endpoint resumes an instrument order operation after a successful redirection.

        ## Inquiry call to PSP to get payment details
        When the user is redirected to merchant page from the payment page by PSP, Outpayce provides a capability of polling to your system and retrieving the payment status.

        To perform this operation, Outpayce sent a payment operation to your system that accepted it. This operation is identified by its nature (i.e. instrument-orders) and its *id*. This *id*, is then used to trigger a polling operation to retrieve the card details from PSP such as:

        ```
        POST https://your-host-name/outpayce/v1//instrument-orders/{id}/resumption
        Content-Type: application/vnd.amadeus+json

        ```
        Your application parses the request and after processing it, returns a response such as:

        ```
        HTTP/1.1 201 Created
        Content-Type: application/vnd.amadeus+json  
        {
          "data": {
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "externalId": "EXTERNAL_ID",
            "status": "CREATED",
            "timestamp": "2023-05-22T23:59:55Z",
            "virtualCard": {
              "vendorCode": "TP",
              "cardNumber": "1871000000000001",
              "cvv": "123",
              "expiryDate": "2024-12",
              "limitations": {
                "numberOfPurchases": 1
              }
            }
          }
        }
        ```
        In case the instrument details are not ready, then PSP would return a "PENDING" status as below:
        ```
        HTTP/1.1 202 Accepted
        Content-Type: application/vnd.amadeus+json  
        {
          "data": {
            "id": "{instrumentorderId}",
            "externalId": "externalId",
            "status": "PENDING",
            "timestamp": "2023-05-22T23:59:55Z",
            "paymentMerchantReference": "merchantReference"
          }
        }

         ```

        In event of an error, Outpayce would expect an error message such as : 
        ```
        {  
        "errors": [
            {
              "status": 400,
              "code": 477,
              "title": "INVALID FORMAT",
              "detail": "The currency code is invalid",
              "source":
              {
                "parameter": "amount/currencyCode"
              }
            }
          ]
        }

        ```
        ```
        {
          "errors": [
            {
              "status": 500,
              "code": 414,
              "title": "INTERNAL PROCESSING ERROR"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 502,
              "code": 5038,
              "title": "TIME OUT ERROR UNKNOWN"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 424,
              "code": 33471,
              "title": "PAYMENT ACTION DECLINED"
            }
          ]
        }

        ```
      operationId: post-instrument-orders-resumption
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ResumptionQuery'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/InstrumentOrderPayload'
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/InstrumentOrderPayload'
        '400':
          description: |
            **400 Bad Request error.** Problem reading or understanding request (Usually missing data or invalid requests). Please find below an exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            33460  |   | MISSING REQUIRED INPUT PARAM(S) - PLEASE ADJUST REQUEST
            33459  |   | INVALID INPUT PARAM(S) - PLEASE ADJUST REQUEST
            00477  |   | INVALID FORMAT
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            INVALID FORMAT:
              errors:
                - code: 477
                  title: INVALID FORMAT
        '403':
          description: |
            **403 Forbidden error.** Generic error linked to permission mismatch. Please find below a non-exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            01666  |   | NOT ALLOWED
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            NOT ALLOWED:
              errors:
                - code: 1666
                  title: NOT ALLOWED
        '409':
          description: |
            **409 Conflict error.** Generic error linked to conflicting operation. Please find below a non-exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            33474  |   | PAYMENT TRANSACTION CANCELLED EXTERNALLY.
            25754  |   | REVERSAL ALREADY PERFORMED
            33477  |   | PAYMENT TRANSACTION ALREADY CANCELLED OR REFUNDED
            33478  |   | PAYMENT TRANSACTION ALREADY TOTALLY CANCELLED OR REFUNDED
            33479  |   | PAYMENT TRANSACTION EXPIRED.
            25888  |   | PARTIAL REVERSAL DISALLOWED
            33869  |   | PAYMENT REVERSAL DENIAL DUE TO CAPTURE PROCESSED
            39041  |   | DUPLICATE REQUEST ERROR
            09659  |   | CC REVERSAL HAS BEEN LOCKED FOR THIS CARD BY ISSUEING BANK
            33034  |   | OUT OF REFUND PERIOD
            33562  |   | PAYMENT PARTIAL REFUND NOT ALLOWED
            33548  |   | PAYMENT PARTIAL CAPTURE NOT ALLOWED
             6617  |   | REFUND AMOUNT GREATER THAN SALE
            42048  |   | UNABLE TO PROCESS REFUND - PARENT OPERATION ID REQUIRED 
            30366  |   | TRANSACTION ABORTED
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            Payment was invalid:
              errors:
                - code: 33474
                  title: PAYMENT TRANSACTION CANCELLED EXTERNALLY.
        '422':
          description: "**422 Unprocessable Entity error.** Generic error linked to unprocessable request. Please find below a non-exhaustive list of errors:\n\ncode   | - | title\n------:|:-:|:-\n00011  |   | \tUNABLE TO PROCESS\n01304  |   |  CREDIT CARD NOT ACCEPTED\n"
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            CREDIT CARD NOT ACCEPTED:
              errors:
                - code: 1304
                  title: CREDIT CARD NOT ACCEPTED
        '424':
          description: |
            **424 Failed Dependency error.** Generic error linked to 3rd party functional rejection. Please find below a non-exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            04751  |   | INVALID CARD
            33480  |   | PAYMENT TRANSACTION DECLINED. SUSPECTED FRAUD
            12678  |   | CC SECURITY ID DOES NOT MATCH
            04223  |   | NAME MISMATCH
            12550  |   | AUTHORISATION DENIED INSUFFICIENT FUNDS
            34869  |   | CREDIT CARD DENIAL - INCORRECT PIN
            34477  |   | REVERSAL NOT PERFORMED
            33471  |   | PAYMENT ACTION DECLINED
            40004  |   | UNABLE TO PROCESS REFUND - PROCESS MANUALLY
            65222  |   | PAYMENT REQUIRES 3D SECURE
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            PAYMENT ACTION DECLINED:
              errors:
                - code: 33471
                  title: PAYMENT ACTION DECLINED
        '500':
          description: |
            **500 Internal Server Error error.** Generic Amadeus internal error. Please find below a non-exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            00974  |   | SYSTEM UNAVAILABLE
            00414  |   | INTERNAL PROCESSING ERROR
            02894  |   | ERROR MESSAGE NOT FOUND
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            ERROR MESSAGE NOT FOUND:
              errors:
                - code: 2894
                  title: ERROR MESSAGE NOT FOUND
        '502':
          description: |
            **502 Bad Gateway error.** Generic communication error downstream. Please find below a non-exhaustive list of errors:

            code   | - | title
            ------:|:-:|:-
            33457  |   | COMMUNICATION ERROR - PLEASE TRY AGAIN LATER
            5038   |   | TIMEOUT ERROR UNKNOWN
            31787  |   | ISSUER NOT AVAILABLE
            33503  |   | PAYMENT SERVICE PROVIDER SYSTEM ERROR
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            ISSUER NOT AVAILABLE:
              errors:
                - code: 31787
                  title: ISSUER NOT AVAILABLE
  '/instrument-orders/{id}':
    put:
      tags:
        - Instrument
      summary: ''
      description: |
        This endpoint initiates an instrument order operation.

        # Examples of scenarios
        ## Basic Alternative Payment Method Instrument order Transaction request
        This is an operation to request a payment instrument to your system which will be used to pay a *Merchant* on behalf of one of its *clients*. During this operation, the *client* will be redirected to one of your web pages in order to contract a 'Buy Now Pay Later' payment solution.

        ### Request Examples

        ### Instrument order sample request without travel data
        ```
        PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
            Content-Type: application/vnd.amadeus+json
            ...
            {
            "data": {
                "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
                "method": "VIRTUALCARD",
                "paymentMerchantReference": "VEPQQBAPUL301474106055",
                "pointOfInteraction": {
                    "location": {
                        "address": {
                            "countryCode": "US"
                        }
                    }
                },
                "timestamp": "2023-05-22T23:59:55Z",
                "operationContext": {
                    "merchantAccount": {
                        "name": "AIRLINE SIX",
                        "login": "merchant.123456",
                        "password": {
                            "payload": "1234567890payloadqwerty"
                        }
                    },
                    "links": [
                        {
                            "href": "defaultCallbackURL",
                            "rel": "default-callback"
                        },
                        {
                            "href": "failCallbackURL",
                            "rel": "fail-callback"
                        }
                    ],
                    "device": {
                        "activeWebBrowser": {
                            "ietfLanguageTag": "en-US"
                        }
                    }
                },
                "amount": {
                    "value": "123.45",
                    "currencyCode": "USD"
                }     
            }
        }
          
        ```

        ### Instrument order sample request with Travel data
        ```
        PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
          "data": {
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "method": "VIRTUALCARD",
            "paymentMerchantReference": "VEPQQBAPUL301474106055",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "6X",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "DEL",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "YYZ",
                            "carrierCode": "6X"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "US"
                }
              }
            },
            "timestamp": "2023-05-22T23:59:55Z",
            "operationContext": {
              "merchantAccount": {
                "name": "AIRLINE SIX",
                "login": "merchant.123456",
                "password": {
                  "payload": "1234567890payloadqwerty"
                }
              },
              "links": [
                {
                  "href": "defaultCallbackURL",
                  "rel": "default-callback"
                },
                {
                  "href": "failCallbackURL",
                  "rel": "fail-callback"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-US"
                }
              }
            },
            "amount": {
              "value": "123.45",
              "currencyCode": "USD"
            }
          }
        }  
        ```

        ### Instrument order sample request with Multiple Travel segment data
        ```
        PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
          "data": {
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "method": "VIRTUALCARD",
            "paymentMerchantReference": "VEPQQBAPUL301474106055",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "6X",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "NCE",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "PAR",
                            "carrierCode": "6X"
                          },
                          {
                            "flightNumber": "6X12455B",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "YYZ",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "PAR",
                            "carrierCode": "6X"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "US"
                }
              }
            },
            "timestamp": "2023-05-22T23:59:55Z",
            "operationContext": {
              "merchantAccount": {
                "name": "AIRLINE SIX",
                "login": "merchant.123456",
                "password": {
                  "payload": "1234567890payloadqwerty"
                }
              },
              "links": [
                {
                  "href": "defaultCallbackURL",
                  "rel": "default-callback"
                },
                {
                  "href": "failCallbackURL",
                  "rel": "fail-callback"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-US"
                }
              }
            },
            "amount": {
              "value": "123.45",
              "currencyCode": "USD"
            }
          }
        }  
        ```
        ### Instrument order sample request with Multiple passenger Travel data
        ```
        PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
         {
          "data": {
            "amount": {
              "currencyCode": "USD",
              "value": "123.45"
            },
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "method": "VIRTUALCARD",
            "operationContext": {
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-US"
                }
              },
              "links": [
                {
                  "href": "defaultCallbackURL",
                  "rel": "default-callback"
                },
                {
                  "href": "failCallbackURL",
                  "rel": "fail-callback"
                }
              ],
              "merchantAccount": {
                "login": "merchant.123456",
                "name": "AIRLINE SIX",
                "password": {
                  "payload": "1234567890payloadqwerty"
                }
              }
            },
            "paymentMerchantReference": "VEPQQBAPUL301474106055",
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "US"
                }
              }
            },
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "6X",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "arrivalAirportCode": "YYZ",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "carrierCode": "6X",
                            "departureAirportCode": "DEL",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "flightNumber": "6X12456A"
                          }
                        ],
                        "passenger": {
                          "flightPassengerType": "ADULT",
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          }
                        }
                      }
                    },
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "arrivalAirportCode": "YYZ",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "carrierCode": "6X",
                            "departureAirportCode": "DEL",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "flightNumber": "6X12456A"
                          }
                        ],
                        "passenger": {
                          "flightPassengerType": "ADULT",
                          "name": {
                            "firstName": "John",
                            "lastName": "JACOB"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "timestamp": "2023-05-22T23:59:55Z"
          }
        }
        ```
        ### Instrument order sample request with Hospitality data
        ```
        PUT https://{your-host-name}/v1/instrument-orders/{id} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
         {
        	"data": {
        		"amount": {
        			"value": "2600.20",
        			"currencyCode": "USD"
        		},
        		"id": "639e13-90b025ab-c2b6-4bc7-9458-e78a46142457",
        		"method": "VIRTUALCARD",
        		"operationContext": {
        			"merchantAccount": {
        				"name": "UP-test-1"
        			},
        			"transactionIntent": "NO_PAYMENT",
        			"links": [
        				{
        					"rel": "default-callback",
        					"href": "default-callback-url"
        				},
        				{
        					"rel": "fail-callback",
        					"href": "fail-callback-url"
        				}
        			],
        			"device": {
        				"activeWebBrowser": {
        					"ietfLanguageTag": "en"
        				}
        			}
        		},
        		"paymentMerchantReference": "222955000_0987657900_20242436",
        		"pointOfInteraction": {
        			"reference": "20182436",
        			"referenceType": "propertyId",
        			"referenceOwner": "iHotelier",
        			"location": {
        				"address": {
        					"countryCode": "US"
        				}
        			}
        		},
        		"instrument": {
        			"holder": {
        				"name": {
        					"firstName": "John",
        					"lastName": "KATTY"
        				},
        				"billingAddress": {
        					"countryCode": "GB",        					
        					"cityName": "Test City",
        					"postalCode": " Test PO"
        				}
        			}
        		},
        		"purposeOfOperation": {
        			"sales": [
        				{
        					"reference": "0987657900",
        					"referenceOwner": "ABC",
        					"referenceType": "ConfirmID",
        					"salesItems": [
        						{
        							"category": "LODGING",
        							"lodgingSalesDetails": {
        								"checkin": {
        									"localDateTime": "2025-07-07T10:00:00.000"
        								},
        								"checkout": {
        									"localDateTime": "2025-07-09T09:00:00.000"
        								},
        								"property": {
        									"name": "IBIS Hotel Heathrow",
        									"location": {
        										"address": {
        											"countryCode": "GB",
        											"stateCode": "Test hotel",
        											"cityName": "Test City",
        											"postalCode": " Test PO",
        											"lines": [
        												"abc1",
        												"abc2"
        											]
        										}
        									}
        								},
        								"mainGuest": {
        									"names": [
        										{
        											"firstName": "John",
        											"lastName": "KATTY"
        										},
        										{
        											"firstName": "Grace",
        											"lastName": "John"
        										}
        									]
        								}
        							}
        						}
        					]
        				}
        			]
        		},
        		"timestamp": "2025-06-15T18:01:47Z"
        	}
        }
        ```
        #### Instrument order sample response
        ```
        HTTP/1.1 202 Accepted
        Content-Type: application/vnd.amadeus+json 
        .......

          {
            "data": {
                "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
                "externalId": "EXTERNAL_ID",
                "status": "ACCEPTED",
                "timestamp": "2024-02-28T16:47:11Z",
                "targetPayloads": [
                    {
                        "href": "PAYMENT_REDIRECTION_URL",
                        "method": "POST",
                        "formPayload": [
                            {
                                "name": "amount",
                                "value": "123.45"
                            },
                            {
                                "name": "currencyCode",
                                "value": "USD"
                            }
                        ]
                    }
                ]
            }
        }


        ````
        ###Error response
        ````
        {
          "errors": [
            {
              "status": 400,
              "code": 477,
              "title": "INVALID FORMAT",
              "detail": "The currency code is invalid ",
              "source":
              {
                "parameter": "amount/currencyCode"
              }
            }
          ]
        }

        ```
        {
          "errors": [
            {
              "status": 424,
              "code": 33471,
              "title": "PAYMENT ACTION DECLINED"
            }
          ]
        }
        ```
      operationId: put-instrument-orders-id
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/InstrumentOrderPayload'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/InstrumentOrderResponse'
          headers:
            location:
              description: A link to the newly created resource
              type: string
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/InstrumentOrderResponse'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '409':
          $ref: '#/responses/error-response-409'
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
        '502':
          $ref: '#/responses/error-response-502'
  '/refunds/{id}':
    put:
      tags:
        - Clearing
      summary: ''
      description: |
        This endpoint initiates a refund operation.

        ## Example of a Refund scenario - Card
         ```
          PUT https://{your-host-name}/outpayce/v1/refunds/{refundId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
         {
          "data": {
            "parentOperationId": "{captureId}",
            "id": "{refundId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "expiryDate": "2024-12"
            },
            "timestamp": "2022-11-28T13:37:00Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "links": [
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/refunds/ae2db239-57a5-434c-b77c-29d6776a2bfa/events"
                }
              ]
            },
            "purposeOfOperation": {
              "sales": [
                {
                  "salesItems": [
                    {
                      "flightSalesDetails": {
                        "ticketNumber": "1250123456789"
                      }
                    },
                    {
                      "flightSalesDetails": {
                        "ticketNumber": "4352123456789"
                      }
                    }
                  ]
                }
              ]
            }
          }
        }
         ```

        ## Example of a Refund scenario - APM
           
        ```
        PUT https://{your-host-name}/outpayce/v1/refunds/{refundId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...


        {
          "data": {
            "parentOperationId": "{authorizationId}",
            "id": "{refundId}",
            "amount": {
              "value": "75.24",
              "currencyCode": "EUR"
            },
            "timestamp": "2022-11-28T13:37:00Z",
            
            "method": "AMOP",
            "operationContext": {
              "merchantAccount": {
                  "name": "MERCHANT_ACCOUNT",
                  "login": "merchantLogin",
                  "password": {
                     "payload":"merchantPasword"
                    } 
                }, 
              "links": [
                  {
                      "rel": "webhook",
                      "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/refunds/{refundId}/events"
                  }
              ]
            }
          }
        }
        ```
        ## Example of a Refund scenario - APM with Travel Data
        ```
        PUT https://{your-host-name}/outpayce/v1/refunds/{refundId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
          "data": {
            "parentOperationId": "{authorizationId}",
            "id": "{refundId}",
            "externalId": "{externalId}",
            "amount": {
              "value": "75.24",
              "currencyCode": "EUR"
            },
            "timestamp": "2022-11-28T13:37:00Z",
            "method": "AMOP",
            "purposeOfOperation": {
              "sales": [
                {
                  "salesItems": [
                    {
                      "flightSalesDetails": {
                        "ticketNumber": "1250123456789"
                      }
                    }
                  ]
                }
              ]
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "links": [
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/refunds/{refundId}/events"
                }
              ]
            }
          }
        }

        ```


        Your application parses the request and after processing it, returns a response such as:
        ```
        HTTP/1.1 201 Created
        Location: https://{your-host-name}/outpayce/v1/refunds/{refundId}
        Content-Type: application/vnd.amadeus+json

          {
          "data": {
            "parentOperationId": "authorizationId",
            "id": "refundId",
            "method": "AMOP",
            "status": "RECEIVED",
            "timestamp": "2022-11-29T11:22:00Z"
          }
        }
        ```


        Error response
        ```
        {
          "errors": [
            {
              "status": 400,
              "code": 477,
              "title": "INVALID FORMAT",
              "detail": "The currency code is invalid ",
              "source":
              {
                "parameter": "amount/currencyCode"
              }
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 403,
              "code": 1666,
              "title": "NOT ALLOWED"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 409,
              "code": 39041,
              "title": "DUPLICATE REQUEST ERROR"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 422,
              "code": 11,
              "title": "UNABLE TO PROCESS"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 424,
              "code": 33471,
              "title": "PAYMENT ACTION DECLINED"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 500,
              "code": 414,
              "title": "INTERNAL PROCESSING ERROR"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 502,
              "code": 5038,
              "title": "TIMEOUT ERROR UNKNOWN"
            }
          ]
        }

        ```
      operationId: put-refunds-id
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/RefundPayload'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/RefundPayload'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '409':
          description: Conflict
          schema:
            type: object
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
        '502':
          $ref: '#/responses/error-response-502'
  '/captures/{id}':
    put:
      tags:
        - Clearing
      summary: ''
      description: |
        This endpoint initiates a capture operation.
        ## Example of a Capture scenario
         ```
          PUT https://{your-host-name}/outpayce/v1/captures/{captureId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ... 
        {
          "data": {
            "parentOperationId": "{authorizationId}",
            "id": "{captureId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "expiryDate": "2024-12",
              "holderName": "Card Holder Name"
            },
            "approvalCode": "APPROVAL_CODE",
            "timestamp": "2022-11-28T13:37:00Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "links": [
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/captures/ae2db239-57a5-434c-b77c-29d6776a2bfa/events"
                }
              ]
            },
            "purposeOfOperation": {
              "sales": [
                {
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "passenger": {
                          "name": {
                            "firstName": "JOHN",
                            "lastName": "DOE"
                          }
                        },
                        "flightLegs": [
                          {
                            "departureAirportCode": "CDG",
                            "travelDate": "2024-01-09",
                            "departureTime": "2024-01-09T18:15:00Z",
                            "carrierCode": "6X",
                            "flightNumber": "3847",
                            "serviceClass": "B",
                            "arrivalTime": "2024-01-09T19:45:00Z",
                            "couponNumber": "194725",
                            "arrivalAirportCode": "NCE"
                          }
                        ],
                        "ticketNumber": "1469380571"
                      }
                    }
                  ],
                  "referenceOwner": "1A",
                  "reference": "RECLOC",
                  "referenceType": "PNR"
                }
              ]
            }
          }
        }
        ```
      operationId: put-captures-id
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/CapturePayload'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/CapturePayload'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '409':
          $ref: '#/responses/error-response-409'
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
  '/reversals/{id}':
    put:
      tags:
        - Acceptance
      summary: ''
      description: |-
        This endpoint initiates a reversal operation.

        ## Examples of Reversal scenarios
        ### Reversal simple request
        ```
          PUT https://{your-host-name}/outpayce/v1/reversals/{reversalId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "parentOperationId": "{authorizationId}",
            "id": "{reversalId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            }
          }
        }
        ```

        ### Reversal request with optional data
        ```
          PUT https://{your-host-name}/outpayce/v1/reversals/{reversalId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "parentOperationId": "{authorizationId}",
            "id": "{reversalId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "expiryDate": "2024-12"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              }
            },
            "approvalCode": "APPROVAL_CODE",
            "timestamp": "2022-11-28T13:37:00Z"
          }
        }
        ```
      operationId: put-reversals-id
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ReversalPayload'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/ReversalPayload'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '409':
          $ref: '#/responses/error-response-409'
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
  '/authorizations/{id}/resumption':
    post:
      tags:
        - Acceptance
      summary: ''
      description: |
        This endpoint resumes an authorization operation after a successful end user redirection to a payment page.

        ## Steps
        ### Step 2 - Inquiring Payment Status to PSP 

        In event of non-receipt of final Payment status by Outpayce via "Webhook Notification" (For more details about this step, please refer to the Payment Operations Events swagger.) or "Frontend Notification" (For more details about this step, please refer to the Inteface Control Document.), Outpayce provides a capability of polling to your system and retrieving the payment status. 

        To perform this operation, Outpayce sent a payment operation to your system that accepted it. This operation is identified by its nature (i.e. authorizations) and its *id*. This *id*, is then used to trigger a polling operation to retrieve the final payment status such as : 


        ```
        POST https://your-host-name/outpayce/v1/authorizations/{authorizationId}/resumption
        Content-Type: application/vnd.amadeus+json

        ```
        In case the authorization is not yet completed, the PSP would return a response such as:
        ```
        HTTP/1.1 202 Accepted
        Content-Type: application/vnd.amadeus+json  
        {
            "data": {
                "id": "{authorizationId}",
                "externalId": "EXTERNAL_ID",
                "status": "PENDING",
                "timestamp": "2032-11-28T23:59:55Z"
            }
        }  
        ```
        Once the authorization is successful, the PSP would return a response such as:
        ```
        HTTP/1.1 201 Created
        Content-Type: application/vnd.amadeus+json  
        {
            "data": {
                "id": "{authorizationId}",
                "externalId": "EXTERNAL_ID",
                "status": "AUTHORIZED",
                "timestamp": "2032-11-28T23:59:55Z"
            }
        }  
        ```

        In event of an error, Outpayce would expect an error message such as: 

        ```
        {  
        "errors": [
            {
              "status": 400,
              "code": 477,
              "title": "INVALID FORMAT ",
              "detail": "The currency code is invalid ",
              "source":
              {
                "parameter": "amount/currencyCode"
              }
            }
          ]
        }

        ```
        ```
        {
          "errors": [
            {
              "status": 409,
              "code": 30366,
              "title": "TRANSACTION ABORTED"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 500,
              "code": 414,
              "title": "INTERNAL PROCESSING ERROR"
            }
          ]
        }
        ```
        ```
        {
          "errors": [
            {
              "status": 502,
              "code": 5038,
              "title": "TIME OUT ERROR UNKNOWN"
            }
          ]
        }


        ```
      operationId: post-authorization-id-resumption
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/ResumptionQuery'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/AuthorizationPayload'
          headers:
            location:
              description: A link to the newly created resource.
              type: string
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/AuthorizationResponse'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '404':
          description: Not Found
          schema:
            type: object
        '409':
          $ref: '#/responses/error-response-409'
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
        '502':
          $ref: '#/responses/error-response-502'
  '/authorizations/{id}':
    put:
      tags:
        - Acceptance
      summary: ''
      description: |
        This endpoint initiates an authorization operation.
        # Examples of scenarios
        ## Basic Card Authorization
        This is basic authorization scenario where card information is provided to perform a successful authorization. This data is the minimum amount of data Outpayce will always send as part of an authorization request.

        ## Authorization with additional data
        This is an authorization request that includes details related to the merchant account or acquirer information. If these details are provided, they will always be included in the payload of the request.

        ## Authorization with 3DSv2 Data
        This is an authorization request populated with 3DSv2 authentication details.

        ## Authorization with Travel Segment data
        This is an authorization request populated with flight and pasenger details.

        ## Authorization with Installment data 
        This is an authorization request populated with Installment data.

        ## Authorization request with Card on File Capabilities
        ### Initial Storing request of CC details
        This is an authorization scenario where the cardholder initiates the transaction. On top of setting the _transactionInitiator_ as 'HOLDER', the API consumer also indicates the _instrumentFilingRequest_ of 'STORING'.

        ### Cardholder Initiated Transaction with Card on File
        This is an authorization scenario where the cardholder initiates the transaction using stored credentials. On top of setting the _transactionInitiator_ as 'HOLDER', the API consumer also indicates the _instrumentFilingRequest_ of 'REUSE'.

        ### Merchant Initiated Transaction
        This is an authorization scenario where the merchant initiates the transaction, on behalf of the cardholder. In that case, on top of setting the _transactionInitiator_ as 'MERCHANT', this time the API consumer also indicates the _instrumentFilingRequest_ of 'REUSE'.

        ## Basic Alternative Payment Method Initiated Transaction 
        This is basic authorization scenario where information is provided to initiate an alternative payment method transaction and enable merchant to redirect to payment page. This data is the minimum amount of data Outpayce will always send as part of an authorization request.

        ### Request Examples
        ### Basic Card Authorization Request
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "holderName": "Card Holder Name",
              "expiryDate": "2024-12"
            }
          }
        }
        ```

        ### Authorization with additional data
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "pointOfInteraction": {
              "operatingEnvironment": {
                "holderInteractionMode": "ECOMMERCE"
              }
            },
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "holderName": "Card Holder Name",
              "expiryDate": "2024-12"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              }
            }
          }
        }
        ```
        ### Authorization with 3DSv2 data
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "holderName": "Card Holder Name",
              "expiryDate": "2024-12"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "threeDomainSecure": {
                "eci": "05",
                "cavv": "AJkBAWUDOQAAABu8l4F5dQAAAAB=",
                "transStatus": "Y",
                "version": "2.2.0",
                "dsTransactionId": "e9bed923-7dbe-4e03-9886-1c4c3bba4934"
              }
            }
          }
        }
        ```

        ### Authorization with Travel Segment Data
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
          {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "expiryDate": "2024-12",
              "holderName": "Card Holder Name"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              }
            },
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "SHFICC",
                  "referenceType": "PNR",
                  "referenceOwner": "1A",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "fareBasisCode": "XLBCRTFR",
                            "departureAirportCode": "MEL",
                            "departureTime": "2023-05-11T19:55:00Z",
                            "arrivalAirportCode": "BKK",
                            "arrivalTime": "2023-05-12T09:00:00Z",
                            "carrierCode": "QH",
                            "couponNumber": "1",
                            "flightNumber": "700",
                            "serviceClass": "X"
                          },
                          {
                            "fareBasisCode": "XLBCRTFR",
                            "departureAirportCode": "BKK",
                            "departureTime": "2022-05-22T22:10:00Z",
                            "arrivalAirportCode": "MEL",
                            "arrivalTime": "2022-05-23T07:30:00Z",
                            "carrierCode": "QH",
                            "couponNumber": "1",
                            "flightNumber": "701",
                            "serviceClass": "V"
                          }
                        ],
                        "travelAgencyName": "BRITISH AIRWAYS TRAVEL SHOP",
                        "travelAgencyCode": "91492693",                
                        "passenger": {
                          "flightPassengerType": "ADULT",
                          "name": {
                            "firstName": "JOHN",
                            "lastName": "DOE"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          }
        }
        ```
        ### Authorization with Installment Data
        ```
         PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
         Content-Type: application/vnd.amadeus+json
         ...
                  {
          "data": {
            "id": "{authorizationId}",
            "card": {
              "cvv": "999",
              "vendorCode": "VI",
              "expiryDate": "2026-06",
              "cardNumber": "4400009999990004"
            },
            "method": "CARD",
            "timestamp": "2024-08-06T06:47:38Z",
            "authorizationType": "AUTHORIZATION_ONLY",
            "operationContext": {
              "acquirerInformation": {
                "acquirerCountry": "FR",
                "acquirerBin": "ProviderApiTest01"
              },
              "termsAndConditions": {
                "installments": {
                  "firstInstallmentAmount": {
                    "value": "430.55",
                    "currencyCode": "BRL"
                  },
                  "interestAmount": {
                    "value": "30.00",
                    "currencyCode": "BRL"
                  },
                  "subsequentInstallmentAmount": {
                    "value": "50.00",
                    "currencyCode": "BRL"
                  },
                  "maxNumber": 3,
                  "period": {
                    "frequencyType": "MONTHLY"
                  }
                }
              },
              "merchantAccount": {
                "name": "1234"
              }
            },
            "amount": {
              "value": "500.55",
              "currencyCode": "BRL"
            }
          }
        }
         ```
        ### Authorization with Card On File Capabilities
        #### Card on File Initial Request to store CC details
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "expiryDate": "2024-12",
              "holderName": "Card Holder Name"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "transactionInitiator": "HOLDER",
              "termsAndConditions": {
                "credentialsOnFile": {
                  "instrumentFilingRequest": "STORING"
                }
              }
            }
          }
        }
        ```

        #### Cardholder Initiated Transaction with Card on File

        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHOR_AND_CAPTURE",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "expiryDate": "2024-12",
              "holderName": "Card Holder Name"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "transactionInitiator": "HOLDER",
              "termsAndConditions": {
                "credentialsOnFile": {
                  "instrumentFilingRequest": "REUSE"
                }
              },
              "transactionIntent": "REUSABLE",
              "interactionCondition": "PHONE_ORDER"
            }
          }
        }
         ```

        #### Merchant Initiated Transaction with Card on File
        ```
          PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
          Content-Type: application/vnd.amadeus+json
          ...
        {
          "data": {
            "id": "{authorizationId}",
            "amount": {
              "value": "123.45",
              "currencyCode": "EUR"
            },
            "authorizationType": "AUTHORIZATION_ONLY",
            "method": "CARD",
            "card": {
              "vendorCode": "VI",
              "cardNumber": "4000000000000001",
              "cvv": "123",
              "expiryDate": "2024-12",
              "holderName": "Card Holder Name"
            },
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "acquirerInformation": {
                "acquirerBin": "ACQUIRER_BIN",
                "acquirerCountry": "acquirerCountry"
              },
              "transactionInitiator": "MERCHANT",
              "termsAndConditions": {
                "credentialsOnFile": {
                  "instrumentFilingRequest": "REUSE",
                  "reuseProof": {
                            "traceReference": "123abc"
                  }
                }
              },
              "transactionIntent": "REUSABLE",
              "interactionCondition": "ON_FILE"
            }
          }
        }
        ```
        ## Basic Alternative Payment Method Initiated Transaction 
        This is basic authorization scenario where information is provided to initiate an alternative payment method transaction and enable merchant to redirect to payment page. This data is the minimum amount of data Outpayce will always send as part of an authorization request. The following contains example of travel data for airline and hospitality domain

        ### Request Examples
        ## Basic Alternative Payment Method Initiated Transaction 
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
           "data":{
              "id":"{authorizationId}",
              "method":"AMOP",
              "amount": {
                  "value": "123.45",
                  "currencyCode": "EUR"
              },
             "instrument": {
                    "paymentSystem": "PAYPAL"
                },
              "paymentMerchantReference": "merchantReference",
              "authorizationType": "AUTHOR_AND_CAPTURE",
             "timestamp": "2024-08-06T06:47:38Z",
              "pointOfInteraction":{
                 "location":{
                    "address":{
                       "countryCode":"IN"
                    }
                  }  
                 },
              "operationContext":{
                 "merchantAccount":{
                    "name":"MERCHANT_ACCOUNT",
                    "login":"merchantLogin",
                    "password":{
                       "payload":"merchantPasword"
                    }
                 },
                "links": [
                  {
                    "rel":"defaultCallbackURL",
                    "href":"default-callback"
                   },
                  
                  {
                     "rel": "webhook",
                      "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                   }
                ],
                "device": {
                  "activeWebBrowser": {
                     "ietfLanguageTag": "en-IN"
                  }
                }
              }
           }
        }
        ```

        ## Basic Alternative Payment Method Initiated Transaction with Travel Data 
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
           "data":{
              "id":"{authorizationId}",
              "method":"AMOP",
              "amount": {
                  "value": "123.45",
                  "currencyCode": "EUR"
              },
             "instrument": {
                    "paymentSystem": "PAYPAL"
                },
              "paymentMerchantReference": "merchantReference",
              "authorizationType": "AUTHOR_AND_CAPTURE",
              "purposeOfOperation":{
                 "sales":[
                    {
                       "reference":"MERCHANT_REFERENCE",
                       "referenceOwner":"MERCHANT",
                       "referenceType":"PNR",
                       "salesItems":[
                       {
                          "category":"FLIGHT",
                          "flightSalesDetails":{
                             "flightLegs":[
                                {
                                   "flightNumber":"6X12456A",
                                   "departureTime":"2023-06-30T11:40:00Z",
                                   "departureAirportCode":"NCE",
                                   "arrivalTime":"2023-06-30T13:40:00Z",
                                   "arrivalAirportCode":"PAR",
                                   "carrierCode":"6X",
                                   "serviceClass":"L"
                                }
                             ],
                          
                          "passenger":{
                             "name":{
                                "firstName":"MARIE",
                                "lastName":"JACOB"
                             },
                             "flightPassengerType":"ADULT"
                          }
                       }
                    }
                 ]
                }
              ]  
             },
              "pointOfInteraction":{
                 "location":{
                    "address":{
                       "countryCode":"IN"
                    }
                   } 
                 },
             "timestamp": "2024-08-06T06:47:38Z",
              "operationContext":{
                 "merchantAccount":{
                    "name":"MERCHANT_ACCOUNT",
                    "login":"merchantLogin",
                    "password":{
                       "payload":"merchantPasword"
                    }
                 },
                "links": [
                  {
                    "rel":"default-callback",
                    "href":"default-callback URL"
                   },
                  
                  {
                     "rel": "webhook",
                      "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                   }
                ],
                "device": {
                  "activeWebBrowser": {
                     "ietfLanguageTag": "en-IN"
                  }
                }
              }
           }
        }   
        ```
        ## Basic Alternative Payment Method Initiated Transaction with Hospitality Data 
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
        	"data": {
        		"id": "-298e3a0b-e78a-47e9-9c02-a6c8b5a913e5",
        		"method": "AMOP",
        		"purposeOfOperation": {
        			"sales": [
        				{
        					"reference": "645176123",
        					"referenceOwner": "ABC",
        					"referenceType": "ConfirmID"
        				}
        			]
        		},
        		"pointOfInteraction": 
        		  {
        		    "reference":"20182436",
        		    "referenceType":"propertyId",
                "referenceOwner":"iHotelier",
        		      "location": 
        		        {
        		         "address": {
        					   "countryCode": "US"
        				    }
        		 	}
        		},
        		"timestamp": "2025-08-01T06:40:52Z",
        		"operationContext": {
        			"merchantAccount": {
        				"name": "AM0000000",
        				"login": "amadeus_test",
        				"password": {
        					"payload": "test"
        				}
        			},
        			"links": [
        				{
        					"rel": "default-callback",
        					"href": "default-callback-url"
        				},
        				{
        					"rel": "webhook",
        					"href": "webhook-url"
        				}
        			],
        			"device": {
        				"activeWebBrowser": {
        					"ietfLanguageTag": "en"
        				}
        			}
        		},
        		"amount": {
        			"value": "1250.50",
        			"currencyCode": "USD"
        		},
        		"instrument": {
        			"paymentSystem": "IDEAL"
        		},
        		"paymentMerchantReference": "227943000_645176123_1232",
        		"authorizationType": "AUTHOR_AND_CAPTURE"
        	}
        }
        ```
        ### Asynchronous alternative payment method with web redirection:

        When the client agrees to pay with an Asynchronous alternative payment method with web redirection like Multicaixa for an amount of _123.45€_, Outpayce captures the selected alternative payment method, collects the required information and sends a request to your system with a time-limit until when the order would be valid such as:
        ```
        PUT https://your-host-name/outpayce/v1/authorizations/{id}
        Content-Type: application/vnd.amadeus+json   
        {
          "data": {
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "method": "AMOP",
            "purposeOfOperation": {
              "validUntil": "2023-05-23T23:59:55Z",
              "sales": [
                {
                  "reference": "MERCHANT_REFERENCE",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "HAN",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "SGN",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "IN"
                }
              }
            },
            "timestamp": "2023-05-22T23:59:55Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "MERCHANT_LOGIN",
                "password": {
                  "payload": "MERCHANT_PASSWORD"
                }
              },
              "links": [
                   {
                    "rel":"default-callback",
                    "href":"default-callback URL"
                   },
                {
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/{operation-collection}/{operation-id}/events",
                  "rel": "webhook"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-IN"
                }
              }
            },
            "amount": {
              "value": "45230.45",
              "currencyCode": "INR"
            },
            "instrument": {
              "paymentSystem": "MULTICAIXA"
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE"
          }
        }
        ```
        The validUntil field indicates the time until which the sales reference remains valid. In other words, the merchant will hold the sales item until this time. If the customer is unable to complete the payment within this period, the sales item will be cancelled.

        ##### Asynchronous Alternative Payment Methods without web redirection 
        When the client agrees to pay with an asynchronous alternative payment method for an amount of _123.45€_, Outpayce captures the selected alternative payment method, collects the required information and sends a request to your system with a time-limit until when the order would be valid such as:

        ```
        PUT https://your-host-name/outpayce/v1/authorizations/{id}
        Content-Type: application/vnd.amadeus+json   
        {
          "data": {
            "id": "a29874-f68c189c-c617-5876-b1ae-6d6aec9c812a",
            "method": "AMOP",
            "purposeOfOperation": {
              "validUntil": "2023-05-23T23:59:55Z",
              "sales": [
                {
                  "reference": "MERCHANT_REFERENCE",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "HAN",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "SGN",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "IN"
                }
              }
            },
            "timestamp": "2023-05-22T23:59:55Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "MERCHANT_LOGIN",
                "password": {
                  "payload": "MERCHANT_PASSWORD"
                }
              },
              "links": [
                {
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/{operation-collection}/{operation-id}/events",
                  "rel": "webhook"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-IN"
                }
              }
            },
            "amount": {
              "value": "45230.45",
              "currencyCode": "INR"
            },
            "instrument": {
              "paymentSystem": "NAPAS_PAY_LATER"
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE"
          }
        }
        ```
        The validUntil field indicates the time until which the sales reference remains valid. In other words, the merchant will hold the sales item until this time. If the customer is unable to complete the payment within this period, the sales item will be cancelled.

        Your application parses the request and after processing it, generates a reference and returns it in the externalId in the response message.Below is the example:
        ```
        HTTP/1.1 202 Accepted
        Location: https://{your-host-name}/outpayce/v1/authorizations/{authorizationId}
        Content-Type: application/vnd.amadeus+json
        {
        "data": {
            "externalId": "EXTERNAL_ID",
            "status": "ACCEPTED", 
            "timestamp": "2032-11-28T14:59:55Z"
          }
         } 
        ```


        #### AMOP Authorization Request with Payer Inputs
        Some AMOPs require input from the payer to proceed with the transaction. These inputs may include details such as phone or mobile number, payment ID, country, account number, and other relevant information.
 
        ##### UPI ID as input
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ... 
        {
          "data": {
            "id": "{authorizationId}",
            "method": "AMOP",
            "amount": {
              "value": "123",
              "currencyCode": "INR"
            },
            "instrument": {
              "paymentSystem": "UPI",
              "reference": "testsystem@upi",
              "referenceType": "ALIAS"
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "NCE",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "PAR",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "IN"
                }
              }
            },
            "timestamp": "2024-08-06T06:47:38Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "links": [
                {
                  "rel": "default-callback",
                  "href": "default-callback URL"
                },
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en-IN"
                }
              }
            }
          }
        }
        ```
        ##### Payer Bank's Country as Input
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
         {
          "data": {
            "id": "{authorizationId}",
            "method": "AMOP",
            "amount": {
              "value": "123",
              "currencyCode": "EUR"
            },
            "bankAccount": {
              "paymentSystem": "SCT_INSTANT",
              "bank": {
                "countryCode": "FR"
              }
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "NCE",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "PAR",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "FR"
                }
              }
            },
           "timestamp": "2024-08-06T06:47:38Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "links": [
                {
                  "rel": "default-callback",
                  "href": "default-callback URL"
                },
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en"
                }
              }
            }
          }
        }
        ```
        ##### Account Number as input 
        ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ...
        {
          "data": {
            "id": "{authorizationId}",
            "method": "AMOP",
            "amount": {
              "value": "123",
              "currencyCode": "AUD"
            },
            "bankAccount": {
              "paymentSystem": "PAYTO",
              "branchCode": "112334",
              "reference": "789878656565",
              "referenceType": "BANK_ACCOUNT_NO"
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "NCE",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "PAR",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "AU"
                }
              }
            },
            "timestamp": "2024-08-06T06:47:38Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "links": [
                {
                  "rel": "default-callback",
                  "href": "default-callback URL"
                },
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en"
                }
              }
            }
          }
        }
         ``` 
        ##### Mobile Number as input 
         ```
        PUT https://{your-host-name}/outpayce/v1/authorizations/{authorizationId} HTTP/1.1
        Content-Type: application/vnd.amadeus+json
        ... 
        {
          "data": {
            "id": "{authorizationId}",
            "method": "AMOP",
            "amount": {
              "value": "123",
              "currencyCode": "JOD"
            },
            "instrument": {
              "paymentSystem": "CLIQ",
              "holder": {
                "contacts": [{
                  "phone": {
                    "text": "009934758374"
                  }
                }
                ]
              }
            },
            "paymentMerchantReference": "merchantReference",
            "authorizationType": "AUTHOR_AND_CAPTURE",
            "purposeOfOperation": {
              "sales": [
                {
                  "reference": "RECLOC",
                  "referenceOwner": "MERCHANT",
                  "referenceType": "PNR",
                  "salesItems": [
                    {
                      "category": "FLIGHT",
                      "flightSalesDetails": {
                        "flightLegs": [
                          {
                            "flightNumber": "6X12456A",
                            "departureTime": "2023-06-30T11:40:00Z",
                            "departureAirportCode": "AMM",
                            "arrivalTime": "2023-06-30T13:40:00Z",
                            "arrivalAirportCode": "LHR",
                            "carrierCode": "6X",
                            "serviceClass": "L"
                          }
                        ],
                        "passenger": {
                          "name": {
                            "firstName": "MARIE",
                            "lastName": "JACOB"
                          },
                          "flightPassengerType": "ADULT"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            "pointOfInteraction": {
              "location": {
                "address": {
                  "countryCode": "JO"
                }
              }
            },
           "timestamp": "2024-08-06T06:47:38Z",
            "operationContext": {
              "merchantAccount": {
                "name": "MERCHANT_ACCOUNT",
                "login": "merchantLogin",
                "password": {
                  "payload": "merchantPasword"
                }
              },
              "links": [
                {
                  "rel": "default-callback",
                  "href": "default-callback URL"
                },
                {
                  "rel": "webhook",
                  "href": "https://{your-organization-name-in-outpayce}.payment.feeds.outpayce.com/{attributed-sap}/SPWREQ/v1/payment/3rd-party-gateway/{your-organization-name-in-outpayce}/authorizations/{authorizationId}/events"
                }
              ],
              "device": {
                "activeWebBrowser": {
                  "ietfLanguageTag": "en"
                }
              }
            }
          }
        }
        ```
        Response
        ```
        HTTP/1.1 202 Accepted
        Content-Type: application/vnd.amadeus+json 
        {
          "data": {
            "externalId": "1WX80207GX642472G",
            "status": "ACCEPTED",
            "timestamp": "2023-05-22T23:59:55Z",
            "targetPayloads": [
              {
                "href": "REDIRECTION_WEB_PAGE",
                "method": "POST",
                "formPayload": [
                  {
                    "name": "amount",
                    "value": "123.45"
                  },
                  {
                    "name": "currencyCode",
                    "value": "EUR"
                  }
                ]
              }
            ]
          }
        }

        ```
        Error response
        ```
        {
          "errors": [
            {
              "status": 400,
              "code": 477,
              "title": "INVALID FORMAT",
              "detail": "The currency code is invalid ",
              "source":
              {
                "parameter": "amount/currencyCode"
              }
            }
          ]
        }
        ```
        HTTP: 403
        ```
        {
          "errors": [
            {
              "status": 403,
              "code": 1666,
              "title": "NOT ALLOWED"
            }
          ]
        }
        ```
        HTTP: 409
        ```
        {
          "errors": [
            {
              "status": 409,
              "code": 39041,
              "title": "DUPLICATE REQUEST ERROR"
            }
          ]
        }
        ```
        HTTP: 422
        ```
        {
          "errors": [
            {
              "status": 422,
              "code": 11,
              "title": "UNABLE TO PROCESS"
            }
          ]
        }
        ```
        HTTP: 424
        ```
        {
          "errors": [
            {
              "status": 424,
              "code": 33471,
              "title": "PAYMENT ACTION DECLINED"
            }
          ]
        }
        ```
        HTTP: 500
        ```
        {
          "errors": [
            {
              "status": 500,
              "code": 414,
              "title": "INTERNAL PROCESSING ERROR"
            }
          ]
        }
        ```
        HTTP: 502
        ```
        {
          "errors": [
            {
              "status": 502,
              "code": 5038,
              "title": "TIMEOUT ERROR UNKNOWN"
            }
          ]
        }

        ```
      operationId: put-authorizations
      produces:
        - application/vnd.amadeus+json
      consumes:
        - application/vnd.amadeus+json
      parameters:
        - name: id
          in: path
          required: true
          type: string
        - in: body
          name: body
          schema:
            $ref: '#/definitions/AuthorizationPayload'
      schemes:
        - https
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/AuthorizationResponse'
          headers:
            location:
              description: A link to the newly created resource.
              type: string
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/AuthorizationResponse'
        '400':
          $ref: '#/responses/error-response-400'
        '401':
          description: Unauthorized
          schema:
            type: object
        '403':
          $ref: '#/responses/error-response-403'
        '409':
          $ref: '#/responses/error-response-409'
        '422':
          $ref: '#/responses/error-response-422'
        '424':
          $ref: '#/responses/error-response-424'
        '500':
          $ref: '#/responses/error-response-500'
        '502':
          $ref: '#/responses/error-response-502'
tags:
  - name: Operation
    description: |
      **CREATING A PAYMENT OR PAYMENT INSTRUMENT RELATED OPERATION**
  - name: Acceptance
    description: |
      **ESTABLISHING THE PAYMENT CONTRACT**
  - name: Clearing
    description: |
      **TRANSFERRING THE MONEY**
  - name: Instrument
    description: |
      **RETRIEVING A PAYMENT INSTRUMENT**
definitions:
  ResumptionQuery:
    type: object
    title: Resumption Query
    properties:
      data:
        $ref: '#/definitions/Resumption'
  Resumption:
    $ref: '#/definitions/Operation_Resumption'
  Operation_Resumption:
    type: object
    title: Operation_Resumption
    properties:
      targetPayloads:
        type: array
        items:
          $ref: '#/definitions/Payment_Transport_Payload_redirection_'
      sourcePayloads:
        type: array
        items:
          $ref: '#/definitions/Payment_Transport_Payload_redirection_'
  Payment_Transport_Payload_redirection_:
    type: object
    title: Payment Transport Payload (redirection)
    description: |
      TransportPayload used to convey either redirection or callback information payload.
      See as an example of representation what would be equivalent to:
      > POST payment.action/token888 HTTP/1.1
      > Host: www.paymentsystem:443
      > Content-type: application/x-form-urlencoded; charset=utf-8
      > 
      > key1=valA&key2=valB

      HTTP <=> API transportPayload:
      > [{
      >   "href": "https://www.paymentsystem.com/payment.action/token888",
      >   "method": "POST",
      >   "formPayload": [{"name": "key1", "value": "valA"}, {"name": "key2", "value": "valB"}]
      > }]
    properties:
      href:
        type: string
        description: Direct link of the item.
        format: uri
      method:
        type: string
        description: Method of the item.
      formPayload:
        type: array
        title: Form Payload
        items:
          $ref: '#/definitions/Payment_Form_Payload'
      links:
        type: array
        title: links
        items:
          $ref: '#/definitions/Payment_Link_Option'
  Payment_Form_Payload:
    type: object
    title: Payment Form Payload
    description: HTML-style form parameter _name_ and potential _value_.
    properties:
      value:
        type: string
        description: Value of the form item
      name:
        type: string
        description: Name of the form item
  Payment_Link_Option:
    type: object
    title: Payment Link Option
    properties:
      href:
        type: string
        description: Absolute or relative URL.
        format: uri
      rel:
        type: string
        description: |
          Relation of the link (eg. parent, resumption, FAQ). In addition to [IANA standard relations](https://www.iana.org/assignments/link-relations/link-relations.xhtml), payment area bears domain specific ones:
          - \"default-callback\" to indicate the landing page by default,
          - \"webhook\" to indicate a potential webhook in case the 3rd party offers such mechanism, by default,
          - \"resumption\" to indicate where the API consumer is expected to resume the flow after redirection.
  InstrumentOrderPayload:
    type: object
    title: Instrument Order Payload
    properties:
      data:
        $ref: '#/definitions/InstrumentOrder'
  InstrumentOrder:
    $ref: '#/definitions/Operation_Instrument_Order'
  Operation_Instrument_Order:
    title: Operation Instrument Order
    allOf:
      - $ref: '#/definitions/Operation'
      - type: object
        properties:
          amount:
            $ref: '#/definitions/Operation_Amount'
          virtualCard:
            $ref: '#/definitions/payment_VirtualCard'
          paymentMerchantReference:
            type: string
            description: Identifier of the operation generated by the merchant.
          instrument:
            $ref: '#/definitions/Payment_Instrument'
  Operation:
    type: object
    title: Operation
    description: 'An *Operation* is either a payment operation implying or not a direct move of funds between a payer and a payee, or an operation related to a payment instrument (an instrument order or an instrument validation). An *Operation* is therefore an abstract resource that may be one of the following: *Authorization*, *Reversal*, *Capture*, *Refund*, *Instrument Order* and *Instrument Verification*.'
    properties:
      id:
        type: string
        description: |-
          Amadeus Operation identifier.
          This identifier is generated by Amadeus Payment Platform and uniquely represents this operation.
      parentOperationId:
        type: string
        description: Identifier of a previous operation belonging to the same payment.
      externalId:
        type: string
        description: Identifier of the operation generated by the service host.
      method:
        type: string
        description: |-
          "CARD", "AMOP" (alternative method of payment), "VIRTUALCARD". It drives information requested at authorization time.
          - If CARD, then card information is provided if the operation is payment related.
          - If AMOP, then instrument paymentSystem is provided.
          - if VIRTUALCARD, it is to request a VIRTUAL CARD as a payment instrument from the payment partner in Instrument-orders request.
      purposeOfOperation:
        $ref: '#/definitions/Operation_Purpose_of_Payment_Operation'
      pointOfInteraction:
        $ref: '#/definitions/Operation_Point_Of_Interaction'
      status:
        type: string
        description: "Operation status.\r\n\r\nFor CARD method of payment, this value must be \"RECEIVED\" and must be present in CAPTURE & REFUND Operation responses. \r\n\r\nFor APMs with redirection, the following values must be present in: \r\n\r\n- \"ACCEPTED\" in AUTHORIZATION Operation responses\r\n- \"CREATED\" in AUTHORIZATION Operation responses\r\n- \"AUTHORIZED\" in RESUMPTION Operation responses \r\n- \"PENDING\" in RESUMPTION Operation responses\r\n- \"RECEIVED\" in CAPTURE & REFUND Operation responses.\r\n\r\nOtherwise Outpayce System will not be able to process the transaction.\""
      timestamp:
        type: string
        description: Datetime of the operation.
        format: date-time
      operationContext:
        $ref: '#/definitions/Operation_Context'
  Operation_Purpose_of_Payment_Operation:
    type: object
    title: Operation Purpose of Payment Operation
    description: 'Purpose of the payment operation (sales, donation,...)'
    properties:
      sales:
        type: array
        items:
          $ref: '#/definitions/Operation_Sales'
      validUntil:
        type: string
        description: 'Date and time until which the object of the payment (sales) is valid. After this limit, the sales content is released and the sale process has to be started over.'
        format: date-time
  Operation_Sales:
    type: object
    title: Operation Sales
    description: 'Sales summary information, should itemized information be also necessary, then this level of detail will be transported by composition of SalesSummaryItem instances.'
    properties:
      reference:
        type: string
        description: Reference identifying the sales.
      referenceType:
        type: string
        description: Type of reference identifying the sales.
      referenceOwner:
        type: string
        description: Owner of the reference type.
      salesItems:
        type: array
        description: Sales items information.
        items:
          $ref: '#/definitions/Operation_Sales_Item'
  Operation_Sales_Item:
    type: object
    title: Operation Sales Item
    description: 'Sales summary itemized information, usually as a collection of children of a SalesSummary instance.'
    properties:
      lodgingSalesDetails:
        $ref: '#/definitions/Operation_Sales_Item_Lodging_Details'
      category:
        enum:
          - LODGING
          - FLIGHT
        description: Category best qualifying the sales item.
      flightSalesDetails:
        $ref: '#/definitions/Operation_Sales_Item_Flight_Details'
  Operation_Sales_Item_Lodging_Details:
    type: object
    title: Operation Sales Item Lodging Details
    description: Lodging detailed item description as a sales summary item.
    properties:
      reservationNumber:
        type: string
        description: 'Reservation number of the stay, usually assigned at booking time.'
      folioNumber:
        type: string
        description: 'Unique reference tracking guest charges in the property system, usually assigned at check-in time.'
      checkin:
        type: object
        description: Scheduled check-in date and time of the stay.
        properties:
          localDateTime:
            type: string
            description: local date and time compliant with ISO8601.
      checkout:
        type: object
        description: Scheduled check-in date and time of the stay.
        properties:
          localDateTime:
            type: string
            description: local date and time compliant with ISO8601.
      property:
        $ref: '#/definitions/Operation_Property.v1'
      mainGuest:
        type: object
        description: Main guest of the stay.
        properties:
          names:
            type: array
            minItems: 1
            maxItems: 5
            items:
              type: object
              properties:
                firstName:
                  type: string
                  description: First name.
                lastName:
                  type: string
                  description: 'Last name.  '
  Operation_Property.v1:
    title: Operation_Property.v1
    type: object
    x-ama-mask:
      scdm-ref: 'https://rndwww.nce.amadeus.net/git/projects/ADT-SL/repos/data-model-dictionary/browse/reference/common/models/SharedCommonDataModels/SalesSummaryItem/SalesSummaryItem_SalesItemLodgingDetails_Property.v1.yaml'
    description: Property or accommodation associated to a guest as sales summary lodging details..
    properties:
     name:
      description: name of the property
      type: string
     location:
        title: LocationDetails
        description: location of the property
        type: object
        properties:
          address:
            $ref: '#/definitions/Operation_Address'
  Operation_Location:
    type: object
    title: Operation Location
    description: Description of a particular point or place in physical space
    properties:
      address:
        $ref: '#/definitions/Operation_Address'
      subtype:
        type: string
        description: 'Location sub-type (e.g. market, division, airport, port, rail-station, restaurant, atm...)'
      name:
        type: string
        description: 'Label associated to the location (e.g. Eiffel Tower, Madison Square)'
  Operation_Address:
    type: object
    title: Operation Address
    description: Address information
    properties:
      countryCode:
        type: string
        description: ISO 3166-1 country code
        pattern: '[a-zA-Z]{2}'
      lines:
        type: array
        description: 'Line 1 = Street address, Line 2 = Apartment, suite, unit, building, floor, etc'
        items:
          type: string
      postalCode:
        type: string
        description: 'Example: 74130'
      stateCode:
        type: string
        description: State code (two character standard IATA state code)
        pattern: '[a-zA-Z0-9]{1,2}'
      cityName:
        type: string
        description: Name of the city 
      state:
        type: string
        description: 'State, province or country name'
  Operation_Sales_Item_Flight_Details:
    type: object
    title: Operation Sales Item Flight Details
    description: Flight detailed item description as a sales summary item.
    properties:
      flightLegs:
        type: array
        items:
          $ref: '#/definitions/Operation_Sales_Item_Flight_Leg_Details'
      issuingCarrierCode:
        type: string
        description: IATA code of the validating carrier.
      travelAgencyCode:
        type: string
        description: Code identifying the travel agency resposible for this sales..
      travelAgencyName:
        type: string
        description: Name of the travel agency resposible for this sales.
      issuedDate:
        type: string
        description: Date of issuance of the ticket.
        format: date
      reservationSystem:
        type: string
        description: Reservation System.
      passenger:
        type: object
        description: Passenger of the flight.
        properties:
          name:
            type: object
            description: Description of the name of a physical person
            properties:
              firstName:
                type: string
                description: First name.
              lastName:
                type: string
                description: Last name.
          flightPassengerType:
            enum:
              - ADULT
              - CHILD
              - INFANT
              - INFANT_WITH_SEAT
            description: Specifies flight passenger type
      ticketNumber:
        type: string
        description: Ticket number of the flight.
      reservationNumber:
        type: string
        description: 'Reservation number of the flight, usually assigned at booking time.'
      passengerRoute:
        type: array
        description: List of IATA airport codes participating as segment touchpoints chronologically sorted.
        items:
          type: string
  Operation_Sales_Item_Flight_Leg_Details:
    type: object
    title: Operation Sales Item Flight Leg Details
    description: Flight itinerary details associated to a given passenger as sales summary flight details at flight segment level.
    properties:
      fareBasisCode:
        type: string
        description: Airline fare basis code identifying a fare type.
      localArrivalTime:
        type: string
        description: 'Local date and time of the scheduled arrival, compliant with ISO8601.'
        format: date-time
      arrivalTime:
        type: string
        description: 'UTC date and time of the scheduled arrival, compliant with ISO8601.'
        format: date-time
      arrivalAirportCode:
        type: string
        description: IATA 3-letter code representing the airport of arrival of that flight leg.
      localDepartureTime:
        type: string
        description: 'Local date and time of the scheduled departure, compliant with ISO8601.'
        format: date-time
      departureTime:
        type: string
        description: 'UTC date and time of the scheduled departure, compliant with ISO8601.'
        format: date-time
      departureAirportCode:
        type: string
        description: IATA 3-letter code representing the airport of departure of that flight leg.
      carrierCode:
        type: string
        description: IATA code of the carrier in charge of that flight segment.
      travelDate:
        type: string
        description: Day when travel over that segment begins.
        format: date
      couponNumber:
        type: string
        description: Coupon number.
      flightNumber:
        type: string
        description: Flight number associated to the carrier in charge of that flight segment.
      serviceClass:
        type: string
        description: Reference identifying the class of travel and included services (with their conditions and benefits) sold.
  Operation_Point_Of_Interaction:
    type: object
    title: Operation Point Of Interaction
    description: Characteristics and environmental information of a conceptually and individually identifiable point of business interaction leading to some operations.
    properties:
      participatingPaymentTerminal:
        $ref: '#/definitions/Operation_Payment_Terminal'
      operatingEnvironment:
        $ref: '#/definitions/Operation_Operating_Environment'
      location:
        $ref: '#/definitions/Operation_Location'
      referenceOwner:
        type: string
        description: Owner/Issuer of the type of reference used to reference this point of business interaction.
      referenceType:
        type: string
        description: Type of reference used to reference this point of business interaction.
      reference:
        type: string
        description: Reference of the point of business interaction.
  Operation_Payment_Terminal:
    type: object
    title: Operation Payment Terminal
    description: 'Payment terminal (also known as POS Terminal, PDQ terminal, card terminal), device interfacing with payment cards to provide a set of different financial services (for instance make electronic funds transfers).'
    properties:
      deviceReference:
        type: string
        description: Reference identifying the payment terminal.
  Operation_Operating_Environment:
    type: object
    title: Operation Operating Environment
    description: Operating Environment of a given Point of Interaction.
    properties:
      deliveryTypesOfGoods:
        type: array
        enum:
          - DIGITAL_GOODS
          - PHYSICAL_GOODS
          - SERVICES
        description: Types of goods delivered through this Point of Business.
        items:
          type: string
      cardPresence:
        enum:
          - CARD_NOT_PRESENT
          - CARD_PRESENT
          - NO_CONTACT
        description: Qualification of the Point of Business as *Card Present* or *Card Not Present* environment.
      holderInteractionMode:
        enum:
          - ECOMMERCE
          - FACE_TO_FACE
          - MAIL_ORDER
          - HOLDER_NOT_PRESENT
          - PHONE_ORDER
          - RECURRING
          - ON_FILE
        description: Primary mode of interaction with the payment instrument holder that this Point of Business provides.
      hasOnlineCapacity:
        type: boolean
        description: Indicator of the capacity of the Point Of Business to use the network connectivity to synchronously communicate with the processor.
      hasOfflineCapacity:
        type: boolean
        description: Indicator of the capacity of the Point Of Business to operate autonomously without a direct connectivity with the processor.
      vicinity:
        enum:
          - ON_PREMISES
          - OFF_PREMISES
          - NO_TERMINAL
        description: Positioning information with regards to potential premises of the Point of Business.
      supervisedBy:
        enum:
          - FINANCIAL
          - HOLDER
          - MERCHANT
        description: 'Information about which category of stakeholder is accountable, supervising the Point of Business.'
      isAttended:
        type: boolean
        description: Indicator of whether the Point of Business is or not attended.
  Operation_Context:
    type: object
    title: Operation Context
    properties:
      callbackUniqueToken:
        type: string
        description: 'Token of information allowing the API consumer to uniquely identify the context of that payment record, for maintenance or reference purpose. Some API consumers would put some session token for instance.'
      links:
        type: array
        items:
          $ref: '#/definitions/Operation_Link'
      threeDomainSecure:
        $ref: '#/definitions/Operation_Three_Domain_Secure'
      termsAndConditions:
        $ref: '#/definitions/Operation_Terms_And_Conditions'
      interactionCondition:
        type: string
        description: |
          Main condition qualifying the interaction mechanism of the transaction.
          Here are the different interactions supported at the moment:
          - \"ACCOUNT_VERIFICATION\",
          - \"COMMIT_PREAUTHOR\" (commitment of a preauthorization),
          - \"ECOMMERCE\",
          - \"FACE_TO_FACE_PIN\",
          - \"FACE_TO_FACE_MANUAL\",
          - \"IN_FLIGHT\",
          - \"INQUIRY\",
          - \"OTHER_NOT_PRESENT\" (other Card Not Present interaction),
          - \"ON_FILE\",
          - \"PAPER_ORDER\",
          - \"PHONE_ORDER\",
          - \"PREAUTHORIZATION\" (preauthorizing still allows amount to vary),
          - \"RECURRING\",
          - \"MERCHANT_SUSPICIOUS\",
          - \"TIME_BASED\".
      transactionIntent:
        type: string
        description: |
          Provide the original intent of the (future) transaction(s). 
          It is strongly recommended to communicate that intent of use for Merchant-initiated transactions, and even a mandate under some local regulations. Here are the different intents supported at the moment:
          - \"NO_PAYMENT\" (like account verification or inquiries),
          - \"PRE_PAYMENT_ONLY\" (implicitly meaning there is some remainder of payment to cover via some completion later on, e.g. a 10% downpayment),
          - \"ONE_OFF\" (default),
          - \"DEFERRED\" (due to some business rationales),
          - \"NO_SHOW_PENALTY\",
          - \"CANCELLATION_PENALTY\",
          - \"LATE_CHANGE_PENALTY\",
          - \"DEPOSIT_RETAINER_PENALTY\",
          - \"ANY_PENALTY\",
          - \"COMPLETION\" (of a pre-payment done earlier),
          - \"EXTENDED_PERIOD_DELAY\" (due to some specific business cases),
          - \"TECHNICAL_RESUBMISSION\",
          - \"INSTALLMENTS\" (with terms and plans agreed in advance),
          - \"SUBSCRIPTION\" (of fixed amount through regular schedule),
          - \"RECURRING\" (of variable amounts through regular schedule, e.g. utilities payment),
          - \"REUSABLE\" (at any time, of any amount, within payment instrument holder scope of consent of course).
      transactionInitiator:
        enum:
          - MERCHANT
          - HOLDER
        description: Indicate whether the transaction is a MERCHANT initiated transaction (_MIT_) or a payment instrument HOLDER initiated transaction (aka _CIT_ with _C_ standing for cardholder or consumer).
        default: HOLDER
      acquirerInformation:
        $ref: '#/definitions/Operation_AcquirerInformation'
      merchantAccount:
        $ref: '#/definitions/Operation_MerchantAccount'
      device:
        $ref: '#/definitions/Operation_HostingDevice'
  Operation_Link:
    type: object
    title: Operation Link
    properties:
      rel:
        type: string
        description: |
          Relation of the link (eg. parent, resumption, FAQ). In addition to [IANA standard relations](https://www.iana.org/assignments/link-relations/link-relations.xhtml), payment area bears domain specific ones:
          - \"default-callback\" to indicate the landing page by default,
          - \"webhook\" to indicate a potential webhook in case the 3rd party offers such mechanism, by default,
          - \"resumption\" to indicate where the API consumer is expected to resume the flow after redirection,
          - \"fail-callback\" to indicate the landing page when the user cancels the payment or any error occurs,
          - \"keep-alive\" to indicate the URL to keep the payment session alive and not to have an inactivity timeout.
      href:
        type: string
        description: Absolute or relative URL.
        format: uri
  Operation_Three_Domain_Secure:
    type: object
    title: Operation Three Domain Secure
    description: Operation 3-Domain Secure information.
    properties:
      collectionIndicator:
        type: string
        description: UCAF collection indicator value.
      cavvAlgorithm:
        type: string
        description: 'CAVV Algorithm, required for some schemes.'
      aav:
        type: string
        description: UCAF Account holder Authentication Value.
      aevv:
        type: string
        description: Base64-encoded American Express Verification Value.
      cavv:
        type: string
        description: Base64-encoded Cardholder Authentication Verification Value.
      eci:
        type: string
        description: Computed e-commerce indicator.
      transStatus:
        type: string
        description: 3-D Secure 2.x (or later) Final Authentication Result.
      paresStatus:
        type: string
        description: 3-D Secure 1.x Payer Authentication RESponse 1-character status.
      veresStatus:
        type: string
        description: 3-D Secure 1.x Verify Enrollment RESponse 1-character status.
      xid:
        type: string
        description: Base64-encoded 3-D Secure transaction identifier.
      dsTransactionId:
        type: string
        description: 3-D Secure 2.x (or later) Directory Server Transaction Identifier.
        format: uuid
      version:
        type: string
        description: 3-D Secure protocol version.
  Operation_Terms_And_Conditions:
    type: object
    title: Operation Terms And Conditions
    properties:
      credentialsOnFile:
        $ref: '#/definitions/Operation_Credentials_On_File'
      installments:
        $ref: '#/definitions/Operation_InstallmentDetails'
  Operation_Credentials_On_File:
    type: object
    title: Operation Credentials On File
    properties:
      instrumentFilingRequest:
        enum:
          - STORING
          - REUSE
        description: Indicate whether the transaction is the one where the credential are being stored for the first time or it is a subsequent follow up transaction that is performed using stored credentials.
      reuseProof:
        type: object
        properties:
          traceReference:
            type: string
            description: A reference of the trace of the consent for filing or original filing successful transaction.
  Operation_InstallmentDetails:
    type: object
    title: Operation_InstallmentDetails
    properties:
      maxNumber:
        type: integer
      period:
        $ref: '#/definitions/Operation_Period'
      firstInstallmentAmount:
        $ref: '#/definitions/Operation_Amount'
      subsequentInstallmentAmount:
        $ref: '#/definitions/Operation_Amount'
      interestAmount:
        $ref: '#/definitions/Operation_Amount'
  Operation_Period:
    type: object
    title: Operation Period
    description: |
      Models a period of time between two dates and inclusive only of the days of the week specified; for instance using the example: 
      Mondays, Tuesdays, Saturdays and Sundays between 22nd Nov 2019 and 26th Dec 2019 are included
      Some parts of the period can excluded.
    properties:
      frequencyType:
        enum:
          - DAILY
          - MONTHLY
          - WEEKLY
        description: Frequency type
    minProperties: 1
  Operation_Amount:
    type: object
    title: Operation Amount
    description: Operation amount
    properties:
      value:
        type: string
        description: The value of the amount.
      currencyCode:
        type: string
        description: 'Indicate the currency of the provided amount (following [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217)).'
        minLength: 3
        maxLength: 3
  Operation_AcquirerInformation:
    type: object
    title: Operation_AcquirerInformation
    description: Information related to the acquirer of a payment operation.
    properties:
      acquirerBin:
        type: string
        description: Acquirer Bank Identifier Number.
      acquirerCountry:
        type: string
        description: ISO 3166-1 country code of the acquirer.
        pattern: '[a-zA-Z]{2}'
  Operation_MerchantAccount:
    type: object
    title: Operation_MerchantAccount
    description: Information related to the merchant of a payment operation.
    properties:
      name:
        type: string
        description: Name identifiying the merchant in the service host system.
      login:
        type: string
        description: Login of a user registered in the service host system and belonging to the merchant.
      password:
        $ref: '#/definitions/DocumentEnvelope'  
  DocumentEnvelope:
    type: object
    title: DocumentEnvelope
    description: 'Data model to convey any kind of document, any format with associated meta data to help the identification and the decoding.'
    properties:
      payload:
        type: string
        description: This contains the payload of the document. It can either be raw data or encoded data in b6se4. see details in metaData block.
      metaData:
        type: object
        title: DocumentEnvelope_MetaData
        description: 'Meta data associated to payload inside document envelope, helping to read/understand the DocumentEnvelope payload.'
        properties:
          documentType:
            type: string
            description: Type of the document in the payload defined by the "grammarOwner"
          version:
            type: string
            description: |-
              Document Version: Define by the producer that generated the document (see payload), not linked with grammarOwner.

              Recommendation is to use semantic version. It is however not enforced as each client application can define its own versioning.
          grammarType:
            type: string
            description: |-
              Grammar to be used to validate and deserialize the payload.

              It is usually used if the API needs to perform business processed on the data, and therefore need to "read/understand" the data transmitted.

              If the API only "forwards" the data to another application and does not need to understand the content of the payload.
          grammarName:
            type: string
            description: Name of the grammar i.e. name of the file defining the grammar ( MessageRQ.xsd)
          ianaContentType:
            type: string
            description: 'Content-type see official list to be used: https://www.iana.org/assignments/media-types/media-types.xhtml'
          name:
            type: string
            description: 'Document name: name of the document in the payload (namespace, see domain)'
          grammarOwner:
            type: string
            description: 'Controlling agency: company/ organization name of this grammar.'
          grammarDomain:
            type: string
            description: Namespace defined by the GrammarOnwer
          grammarVersion:
            type: string
            description: |-
              Version of the grammar to be used to understand the payload after decoding and decompression

              Recommendation is to use semantic version. It is however not enforced as each "grammarOwner" can define its own versioning.
          grammarRelease:
            type: string
            description: A grammar version can be related to a specific grammarOwner Release.
          compressionType:
            enum:
              - ZLIB
              - NONE
            description: Type of compression applied to the payload (ZLIB method used (see RFC 1950) )
          encoding:
            enum:
              - BASE_64
              - BASE_64_URL
            description: 'Example: BASE_64'
  Operation_HostingDevice:
    type: object
    title: Operation_HostingDevice
    properties:
      id:
        type: string
      activeWebBrowser:
        $ref: '#/definitions/Operation_WebBrowser.v1'
      network:
        $ref: '#/definitions/Operation_Network.v1'
  Operation_WebBrowser.v1:
    type: object
    title: Operation_WebBrowser.v1
    description: Web browser information
    properties:
      userAgentHeader:
        type: string
        description: 'Conveys the User-Agent header information sent by the browser at query time (eg. "Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405").'
      acceptHeader:
        type: string
        description: 'Conveys the Accept header information sent by the browser at query time (eg. "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng;q=0.8"). This would represent the media types acceptable for the response.'
      ietfLanguageTag:
        type: string
        description: 'Preferred language tag used by most of modern computing standards as defined in the IETF BCP-47 (eg. "en", "fr-CA", "pt-BR", "nan-Hant-TW",...).'
  Operation_Network.v1:
    type: object
    title: Operation_Network.v1
    description: Information about the network
    properties:
      ipAddress:
        type: string
        description: 'Value of the IP (Internet Protocol) address, versions 4 or 6.'
  payment_VirtualCard:
    type: object
    title: payment_VirtualCard
    properties:
      vendorCode:
        type: string
      cardNumber:
        type: string
      cvv:
        type: string
      expiryDate:
        type: string
      holderName:
        type: string
      holder:
        $ref: '#/definitions/Payment_Instrument_Holder'
      limitations:
        type: object
        properties:
          numberOfPurchases:
            type: integer
          allowedCurrencies:
            type: array
            items:
              type: string
          beginDate:
            type: string
          endDate:
            type: string
      availableBalance:
        type: object
        properties:
          value:
            type: string
          currencyCode:
            type: string
      eci:
        type: string
        description: The electronic commerce indicator is used in payer authentication to indicate the level of security used when the cardholder provided payment information to the merchant
      cryptogram:
        type: string
        description: cryptogram is used to secure cardholder data every time a transaction is made.
  Payment_Instrument_Holder:
    type: object
    title: Payment Instrument Holder
    description: Describe the holder of the payment instrument.
    properties:
      language:
        type: string
        description: 'Indicate the payment-instrument holder''s language, lower case alpha-2 code is expected (following [ISO 639](https://en.wikipedia.org/wiki/ISO_639), eg. "en" for English).'
      email:
        type: string
        description: 'Indicate the payment-instrument holder''s email address ([RFC 5322](https://tools.ietf.org/html/rfc5322)), please note that length beyond 70 characters and internationalization are not yet supported ([RFC 6530](https://tools.ietf.org/html/rfc6530)).'
      billingAddress:
        type: object
        title: billingAddress
        description: 'Indicate the payment-instrument holder''s postal address, please standardize your input following recommendation from [UPU](http://www.upu.int) international interoperability standard (for instance, try to stick to non accented roman upper case characters, use standard abbreviations,...).'
        properties:
          countryCode:
            type: string
            description: 'Indicate the payment-instrument holder''s country, upper case alpha-2 code is expected (following [ISO 3166](https://en.wikipedia.org/wiki/ISO_3166), eg. "AD" for Andorra).'
            minLength: 2
            maxLength: 2
          cityName:
            type: string
            description: 'Indicate the payment-instrument holder''s city name, up to 35 characters.'          
          postalCode:
            type: string
            description: 'Indicate the payment-instrument holder''s postal code, up to 10 characters.'
      contacts:
        type: array
        title: Contact
        description: 'A contact refers to the information that can be used to reach a person, a company or an organization.'
        items:
          type: object
          title: Contact
          description: 'A contact refers to the information that can be used to reach a person, a company or an organization.'
          properties:
            phone:
              type: object
              title: Phone
              description: Phone information.
              properties:
                text:
                  type: string
                  description: String containing the full phone number - applicable only when a structured phone (i.e. countryCallingCode + number) is not provided
      name:
        type: object
        title: name
        properties:
          lastName:
            type: string
          firstName:
            type: string
  Payment_Instrument:
    type: object
    title: Payment Instrument
    description: 'The payment instrument is usually operated by its holder in order to pay. In some cases, please note that such use may be delegated to another payer. Therefore there could be some cases where the registered instrument holder differs from the payer.'
    properties:
      paymentSystem:
        type: string
        description: |
          NOT FOR METHOD CARD - Upper case key representing the supported payment system chosen by the payer from a predetermined list:
          - \"[ALIPAY](https://intl.alipay.com)\",
          - \"[CIMBCLICKS](https://www.cimbclicks.com.my)\",
          - \"[EPS](https://www.eps-ueberweisung.at)\",
          - \"[GIROPAY](https://www.giropay.de)\",
          - \"[IDEAL](https://www.ideal.nl)\",
          - \"[KLARNA](https://www.klarna.com)\",
          - \"[KNET](https://www.knetpay.com.kw)\",
          - \"[MAYBANK2U](https://www.maybank2u.com.my)\",
          - \"[PAYPAL](https://www.paypal.com)\",
          - \"[POLI](https://www.polipayments.com)\",
          - \"[QIWI](https://qiwi.com)\",
          - \"[SAFETYPAY](https://www.safetypay.com)\",
          - \"[SEPA](https://ec.europa.eu/info/business-economy-euro/banking-and-finance/consumer-finance-and-payments/payment-services/single-euro-payments-area-sepa_en)\",
          - \"[SOFORT](https://www.sofort.de)\",
          - \"[UNIONPAY](https://www.unionpayintl.com)\",
          - \"[VNPAY](https://vnpay.vn/)\",
          - \"[SHOPEEPAY](https://shopeepay.vn/)\",
          - \"[VIETQR](https://vietqr.vn/)\",
          - \"[BIZUM](https://bizum.es/en/)\",
          - \"[CLIQ](https://www.jopacc.com/what-we-do/systems-platforms/instant-payment-system-cliq/what-cliq)\",
          - \"[UPI](https://www.npci.org.in/)\",
          - \"[PAYTO](https://payto.com.au/)\",
          - \"[SCT_INSTANT](https://www.ecb.europa.eu/ecb-and-you/explainers/tell-me-more/html/instant_payments.en.html)\",
          - \"[PSE](https://www.bbva.com.co/personas/blog/tutoriales/bbva-net/pagos-pse.html) \".

          Prerequisite is that this payment method is already contractually made available on behalf of the payee. For a more complete list of payment systems, please liaise with your Business Contact.
      holder:
        $ref: '#/definitions/Payment_Instrument_Holder'
      reference:
        type: string
        description: Reference entered by the user identifying the user's payment instrument.
      referenceType:
        type: string
        description: 'Type of reference used to reference this payment instrument. '
      referenceOwner:
        type: string
        description: Owner or Issuer of referenceType
      wallet:
        $ref: '#/definitions/Wallet'
  Wallet:
    type: object
    title: Wallet
    description: Wallet is a container of payment instrument. This object contains wallet related information as below.
    properties:
      walletType:
        enum:
          - APPLEPAY
          - GOOGLEPAY
        description: This field signifies the name of the wallet used to facilitate the respective wallet transaction.
      provider:
        enum:
          - APPLE
          - GOOGLE
        description: This field represents the name of the provider of the wallet used to facilitate the transaction
  ErrorResponse:
    type: object
    title: Error Response
    properties:
      errors:
        type: array
        items:
          $ref: '#/definitions/Error'  
  Error:
    type: object
    title: Error
    description: The Error Definition
    properties:
      status:
        type: integer
        description: 'The [HTTP status code](https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml) of this response. This is present only in terminal errors which cause an unsuccessful response. In the case of multiple errors, they must all have the same status.'
      code:
        type: integer
        description: 'A machine-readable error code, that will enable the API Consumers code to handle this type of error'
      title:
        type: string
        description: 'An error title from the Canned Messages table with a 1:1 correspondence to the error code. This may be localized'
      detail:
        type: string
        description: 'An easy-to-read explanation specific to this occurrence of the problem. It should give the API consumer an idea of what went wrong and how to recover from it. Like the title, this field’s value can be localized.'
      source:
        type: object
        title: Error_Source
        properties:
          parameter:
            type: string
            description: The key of the URI path or query parameter that caused the error
          pointer:
            type: string
            description: 'A JSON Pointer [RFC6901] to the associated entity in the request body that caused this error'
          example:
            type: string
            description: A sample input to guide the user when resolving this issue
      documentation:
        type: string
        description: A link to a web page or file with further documentation to help the API consumer resolve this error
        format: url
  InstrumentOrderResponse:
    type: object
    title: Instrument Order Response
    properties:
      data:
        type: object
        allOf:
          - $ref: '#/definitions/InstrumentOrder'
          - $ref: '#/definitions/Resumption'
  RefundPayload:
    type: object
    title: Refund Payload
    properties:
      data:
        $ref: '#/definitions/Refund'
  Refund:
    $ref: '#/definitions/Operation_Refund'
  Operation_Refund:
    title: Operation Refund
    allOf:
      - $ref: '#/definitions/Operation'
      - type: object
        properties:
          amount:
            $ref: '#/definitions/Operation_Amount'
          instrument:
            $ref: '#/definitions/Payment_Instrument'
          card:
            $ref: '#/definitions/Card'
          bankAccount:
            $ref: '#/definitions/BankAccount'
          paymentMerchantReference:
            type: string
            description: |-
              Operation merchant reference.

              Identifier of the operation generated by the merchant.
          pspReconciliationReference:
            type: string
            description: Authorization PSP reference provided for reconciliation purpose (also identified as _PRR_ in other Amadeus payment applications). This reference is generated by the payee in order to reconciliate the payment settlement against the sales.
  Card:
    type: object
    title: Card
    description: The payment card is a particular payment instrument.
    properties:
      vendorCode:
        type: string
        description: |
          Upper case key representing the brand of the payment card chosen by the payer to process that payment transaction out of that non-exhaustive list:
          - "VI" for Visa® (usually card starting with 4xxx),
          - "CA" for Mastercard® (usually card starting with 5xxx, 6xxx or 2xxx),
          - "AX" for American Express® (usually card starting with 34xxx or 37xxx),
          - "DC" or "DS" for Diners Club®/Discover® (usually card starting with 64xxx or 65xxx),
          - "JC" for JCB® (Japan Credit Bureau) (usually card starting with 35xxx),
          - "UP" for UnionPay® (usually card starting with 62xxx),
          - "TP" for UATP® (usually card starting with 1xxx)...
          Prerequisite is of course that this brand is already contractually made available on behalf of the payee. For a more complete list of card brands (Aura®, CB®, elo®, Hipercard®, Maestro®, mada®...), please liaise with your Business Contact.
        minLength: 2
        maxLength: 2
      holderName:
        type: string
        description: Card holder fullname registered against that payment card.
      expiryDate:
        type: string
        description: 'Card expiry date, when present, displayed on the front of the payment card. Format expected is *YYYY-MM*.'
        pattern: '20[0-9]{2}-(0[1-9]|10|11|12)'
        minLength: 7
        maxLength: 7
      cvv:
        type: string
        description: 'Card Verification Value, also known as [card security code](https://en.wikipedia.org/wiki/Card_security_code), displayed (usually) on the back of the payment card. Handling of this very sensitive information must comply with [PCI-DSS](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard).'
        minLength: 3
        maxLength: 4
      tokenizedCardNumber:
        type: string
        description: 'Token representing the payment card of the payer, compliant with [PCI-DSS](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard) scope reduction tokenization principles. This information being sensitive, as for the cardNumber field itseld, please do not expect this information to be returned by default.'
      maskedCardNumber:
        type: string
        description: 'Masked payment card number, following recommendations of [PCI-DSS](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard). This information will usually be returned for informational purposes, for instance it can be displayed or printed in some payment receipt.'
      cardNumber:
        type: string
        description: 'Payment card number, also known as PAN, or [primary account number](https://en.wikipedia.org/wiki/Payment_card_number), displayed (usually) on the front of the payment card. Handling of this very sensitive information must comply with [PCI-DSS](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard). This information will usually not be returned as is, but masked.'
      paymentSystem:
        type: string
        description: |
          NOT FOR METHOD CARD - Upper case key representing the supported payment system chosen by the payer from a predetermined list:
          - \"[ALIPAY](https://intl.alipay.com)\",
          - \"[CIMBCLICKS](https://www.cimbclicks.com.my)\",
          - \"[EPS](https://www.eps-ueberweisung.at)\",
          - \"[GIROPAY](https://www.giropay.de)\",
          - \"[IDEAL](https://www.ideal.nl)\",
          - \"[KLARNA](https://www.klarna.com)\",
          - \"[KNET](https://www.knetpay.com.kw)\",
          - \"[MAYBANK2U](https://www.maybank2u.com.my)\",
          - \"[PAYPAL](https://www.paypal.com)\",
          - \"[POLI](https://www.polipayments.com)\",
          - \"[QIWI](https://qiwi.com)\",
          - \"[SAFETYPAY](https://www.safetypay.com)\",
          - \"[SEPA](https://ec.europa.eu/info/business-economy-euro/banking-and-finance/consumer-finance-and-payments/payment-services/single-euro-payments-area-sepa_en)\",
          - \"[SOFORT](https://www.sofort.de)\",
          - \"[UNIONPAY](https://www.unionpayintl.com)\".
          Prerequisite is that this payment method is already contractually made available on behalf of the payee. For a more complete list of payment systems, please liaise with your Business Contact.
      holder:
        $ref: '#/definitions/Payment_Instrument_Holder'
      tokenizationType:
        enum:
          - PRIVATE_TOKEN
          - EMVCO
          - ALTID
          - APPLEPAY
          - GOOGLEPAY
        description: Standard used for tokenization. This field describes the type of tokenization under which the received token is being considered. Default value would be considered as PRIVATE_TOKEN
      tokenProvider:
        type: string
        description: |
          Upper case key representing the issuer or provider of the instrument token from a predetermined list:
            - \\\"[1A](https://www.outpayce.com)\\\" for Outpayce (formerly Amadeus) tokens,
            - \\\"[ACI](https://www.accertify.com)\\\" for Accertify tokens,
            - \\\"[FREEDOMPAY](https://corporate.freedompay.com)\\\" for FreedomPay tokens,
            - \\\"[PAYU](https://payu.in)\\\" for PayU tokens,
            - ...
          For a more complete list of supported token issuers or providers, please liaise with your Business Contact.
      wallet:
        $ref: '#/definitions/Wallet'
  BankAccount:
    type: object
    title: BankAccount
    description: The bank account is a particular payment instrument.
    properties:
      bic:
        type: string
        description: 'SWIFT Bank Identifier Code (as per [ISO 9362]https://en.wikipedia.org/wiki/ISO_9362) of the bank account of the payer, optional in case of SEPA Credit Transfers since 2016.'
        pattern: '^[A-Z]{6}[A-Z0-9]{2,5}'
        minLength: 8
        maxLength: 11
      iban:
        type: string
        description: '[International Bank Account Number](https://en.wikipedia.org/wiki/International_Bank_Account_Number) of the payer as per ISO 13616.'
        pattern: '^[A-Z]{2}[0-9]{2}[A-Z0-9]{10,30}'
        minLength: 14
        maxLength: 34
      paymentSystem:
        type: string
        description: |
          NOT FOR METHOD CARD - Upper case key representing the supported payment system chosen by the payer from a predetermined list:
          - \"[ALIPAY](https://intl.alipay.com)\",
          - \"[CIMBCLICKS](https://www.cimbclicks.com.my)\",
          - \"[EPS](https://www.eps-ueberweisung.at)\",
          - \"[GIROPAY](https://www.giropay.de)\",
          - \"[IDEAL](https://www.ideal.nl)\",
          - \"[KLARNA](https://www.klarna.com)\",
          - \"[KNET](https://www.knetpay.com.kw)\",
          - \"[MAYBANK2U](https://www.maybank2u.com.my)\",
          - \"[PAYPAL](https://www.paypal.com)\",
          - \"[POLI](https://www.polipayments.com)\",
          - \"[QIWI](https://qiwi.com)\",
          - \"[SAFETYPAY](https://www.safetypay.com)\",
          - \"[SEPA](https://ec.europa.eu/info/business-economy-euro/banking-and-finance/consumer-finance-and-payments/payment-services/single-euro-payments-area-sepa_en)\",
          - \"[SOFORT](https://www.sofort.de)\",
          - \"[UNIONPAY](https://www.unionpayintl.com)\",
          - \"[VNPAY](https://vnpay.vn/)\",
          - \"[SHOPEEPAY](https://shopeepay.vn/)\",
          - \"[VIETQR](https://vietqr.vn/)\",
          - \"[BIZUM](https://bizum.es/en/)\",
          - \"[CLIQ](https://www.jopacc.com/what-we-do/systems-platforms/instant-payment-system-cliq/what-cliq)\",
          - \"[UPI](https://www.npci.org.in/)\",
          - \"[PAYTO](https://payto.com.au/)\",
          - \"[SCT_INSTANT](https://www.ecb.europa.eu/ecb-and-you/explainers/tell-me-more/html/instant_payments.en.html)\",
          - \"[PSE](https://www.bbva.com.co/personas/blog/tutoriales/bbva-net/pagos-pse.html) \".

          Prerequisite is that this payment method is already contractually made available on behalf of the payee. For a more complete list of payment systems, please liaise with your Business Contact.
      holder:
        $ref: '#/definitions/Payment_Instrument_Holder'
      branchCode:
        type: string
        description: Branch code of the bank in which the payer holds the bank account.
      reference:
        type: string
        description: Reference entered by the user identifying the bank account.
      referenceType:
        type: string
        description: Type of reference used to reference the Bank account.
      referenceOwner:
        type: string
        description: Owner of the referenceType.
      bank:
        type: object
        description: The financial institution in which the payer holds an account.
        properties:
          countryCode:
            type: string
            description: "Country of the bank in which the payer holds the bank account following [ISO 3166](\r\nhttps://en.wikipedia.org/wiki/ISO_3166)"
            pattern: '[a-zA-Z]'
            minLength: 2
            maxLength: 2
  CapturePayload:
    type: object
    title: Capture Payload
    properties:
      data:
        $ref: '#/definitions/Capture'
  Capture:
    $ref: '#/definitions/Operation_Capture'
  Operation_Capture:
    title: Operation Capture
    allOf:
      - $ref: '#/definitions/Operation'
      - type: object
        properties:
          amount:
            $ref: '#/definitions/Operation_Amount'
          instrument:
            $ref: '#/definitions/Payment_Instrument'
          card:
            $ref: '#/definitions/Card'
          bankAccount:
            $ref: '#/definitions/BankAccount'
          paymentMerchantReference:
            type: string
            description: |-
              Operation merchant reference.

              Identifier of the operation generated by the merchant.
          approvalCode:
            type: string
            description: Authorization approval code acting as primary proof of availability of funds that can be used by the payee in order to request a capture of those funds to their bank.
            minLength: 6
            maxLength: 8
          pspReconciliationReference:
            type: string
            description: Authorization PSP reference provided for reconciliation purpose (also identified as _PRR_ in other Amadeus payment applications). This reference is generated by the payee in order to reconciliate the payment settlement against the sales.
  ReversalPayload:
    type: object
    title: Reversal Payload
    properties:
      data:
        $ref: '#/definitions/Reversal'
  Reversal:
    $ref: '#/definitions/Operation_Reversal'
  Operation_Reversal:
    title: Operation_Reversal
    allOf:
      - $ref: '#/definitions/Operation'
      - type: object
        properties:
          amount:
            $ref: '#/definitions/Operation_Amount'
          approvalCode:
            type: string
            description: Authorization approval code acting as primary proof of availability of funds that can be used by the payee in order to request a capture of those funds to their bank.
            minLength: 6
            maxLength: 8
          paymentMerchantReference:
            type: string
            description: |-
              Operation merchant reference.

              Identifier of the operation generated by the merchant.
          instrument:
            $ref: '#/definitions/Payment_Instrument'
          card:
            $ref: '#/definitions/Card'
          bankAccount:
            $ref: '#/definitions/BankAccount'
          pspReconciliationReference:
            type: string
            description: Authorization PSP reference provided for reconciliation purpose (also identified as _PRR_ in other Amadeus payment applications). This reference is generated by the payee in order to reconciliate the payment settlement against the sales.
  AuthorizationPayload:
    type: object
    title: Authorization Payload
    properties:
      data:
        $ref: '#/definitions/Authorization'
  Authorization:
    $ref: '#/definitions/Operation_Authorization'
  Operation_Authorization:
    title: Operation Authorization
    allOf:
      - $ref: '#/definitions/Operation'
      - type: object
        properties:
          amount:
            $ref: '#/definitions/Operation_Amount'
          instrument:
            $ref: '#/definitions/Payment_Instrument'
          card:
            $ref: '#/definitions/Card'
          bankAccount:
            $ref: '#/definitions/BankAccount'
          paymentMerchantReference:
            type: string
            description: |-
              Operation merchant reference.

              Identifier of the operation generated by the merchant.
          approvalCode:
            type: string
            description: Authorization approval code acting as primary proof of availability of funds that can be used by the payee in order to request a capture of those funds to their bank.
            minLength: 6
            maxLength: 8
          authorizationType:
            enum:
              - AUTHORIZATION_ONLY
              - AUTHOR_AND_CAPTURE
            description: |-
              "AUTHORIZATION_ONLY" or "AUTHOR_AND_CAPTURE".
              Indicates how the settlement is triggered:
               - If AUTHORIZATION_ONLY, then the clearing of the authorization needs to be triggered via its dedicated operation, i.e. Capture.
                - If AUTHOR_AND_CAPTURE, then the clearing and settlement is triggered automatically.
          validFrom:
            type: string
            description: Beginning date of the validity of the approval code.
            format: date
          validUntil:
            type: string
            description: Ending date of the validity of the approval code.
            format: date
          visaDetails:
            $ref: '#/definitions/Operation_AuthorizationVisaSpecifics'
          mastercardDetails:
            $ref: '#/definitions/Operation_AuthorizationMastercardSpecifics'
          americanexpressDetails:
            $ref: '#/definitions/Operation_AuthorizationAmexSpecifics'
          schemeTransactionId:
            type: string
            description: Identifier of the payment transaction in the card scheme system.
          pspReconciliationReference:
            type: string
            description: Authorization PSP reference provided for reconciliation purpose (also identified as _PRR_ in other Amadeus payment applications). This reference is generated by the payee in order to reconciliate the payment settlement against the sales.
  Operation_AuthorizationVisaSpecifics:
    type: object
    title: Operation_AuthorizationVisaSpecifics
    properties:
      pointOfService:
        $ref: '#/definitions/Operation_VisaPointOfService'
      cardSequenceNumber:
        type: string
        minLength: 3
        maxLength: 3
      responseCode:
        type: string
        minLength: 2
        maxLength: 2
      authorizationCharacteristicsIndicator:
        type: string
        minLength: 1
        maxLength: 1
  Operation_VisaPointOfService:
    type: object
    title: Operation_VisaPointOfService
    properties:
      entryModeCode:
        type: string
        minLength: 4
        maxLength: 4
      conditionCode:
        type: string
        minLength: 2
        maxLength: 2
      additionalPosInformation:
        $ref: '#/definitions/Operation_VisaAdditionalPosInfo'
  Operation_VisaAdditionalPosInfo:
    type: object
    title: Operation_VisaAdditionalPosInfo
    properties:
      terminalType:
        type: string
        minLength: 1
        maxLength: 1
      terminalEntryCapability:
        type: string
        minLength: 1
        maxLength: 1
      chipConditionCode:
        type: string
        minLength: 1
        maxLength: 1
      specialConditionIndicator:
        type: string
        minLength: 1
        maxLength: 1
      merchantGroupIndicator:
        type: string
        minLength: 2
        maxLength: 2
      chipTransactionIndicator:
        type: string
        minLength: 1
        maxLength: 1
      chipCardReliabilityIndicator:
        type: string
        minLength: 1
        maxLength: 1
      electronicCommerceAndPaymentIndicaor:
        type: string
        minLength: 2
        maxLength: 2
      cardholderIdMethodIndicator:
        type: string
        minLength: 1
        maxLength: 1
      partialAuthorizationIndicator:
        type: string
        minLength: 1
        maxLength: 1
  Operation_AuthorizationMastercardSpecifics:
    type: object
    title: Operation_AuthorizationMastercardSpecifics
    properties:
      pointOfService:
        $ref: '#/definitions/Operation_MastercardPointOfService'
      cardSequenceNumber:
        type: string
        minLength: 3
        maxLength: 3
      electronicCommerceIndicators:
        type: string
        minLength: 7
        maxLength: 7
      cardholderActivatedTerminalLevel:
        type: string
        minLength: 1
        maxLength: 1
  Operation_MastercardPointOfService:
    type: object
    title: Operation_MastercardPointOfService
    properties:
      authorizationLifeCycle:
        type: string
        minLength: 2
        maxLength: 2
      cardCaptureCapabilities:
        type: string
        minLength: 1
        maxLength: 1
      cardPresence:
        type: string
        minLength: 1
        maxLength: 1
      cardholderPresence:
        type: string
        minLength: 1
        maxLength: 1
      entryMode:
        type: string
        minLength: 3
        maxLength: 3
      terminal:
        $ref: '#/definitions/Operation_MastercardPosTerminal'
      transactionStatus:
        type: string
        minLength: 1
        maxLength: 1
      transactionSecurity:
        type: string
        minLength: 1
        maxLength: 1
  Operation_MastercardPosTerminal:
    type: object
    title: Operation_MastercardPosTerminal
    properties:
      attendance:
        type: string
        minLength: 1
        maxLength: 1
      location:
        type: string
        minLength: 1
        maxLength: 1
      cardDataInputCapabilityIndicator:
        type: string
        minLength: 1
        maxLength: 1
  Operation_AuthorizationAmexSpecifics:
    type: object
    title: Operation_AuthorizationAmexSpecifics
    properties:
      pointOfServiceData:
        type: string
        minLength: 12
        maxLength: 12
      electronicCommerceIndicator:
        type: string
        minLength: 2
        maxLength: 2
  AuthorizationResponse:
    type: object
    title: Authorization Response
    properties:
      data:
        type: object
        allOf:
          - $ref: '#/definitions/Authorization'
          - $ref: '#/definitions/Resumption'
responses:
  error-response-400:
    description: |
      **400 Bad Request error.** Problem reading or understanding request (Usually missing data or invalid requests). Please find below an exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      33460  |   | MISSING REQUIRED INPUT PARAM(S) - PLEASE ADJUST REQUEST
      33459  |   | INVALID INPUT PARAM(S) - PLEASE ADJUST REQUEST
      00477  |   | INVALID FORMAT
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      INVALID FORMAT:
        errors:
          - code: 477
            title: INVALID FORMAT
  error-response-403:
    description: |
      **403 Forbidden error.** Generic error linked to permission mismatch. Please find below a non-exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      01666  |   | NOT ALLOWED
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      NOT ALLOWED:
        errors:
          - code: 1666
            title: NOT ALLOWED
  error-response-409:
    description: |
      **409 Conflict error.** Generic error linked to conflicting operation. Please find below a non-exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      33474  |   | PAYMENT TRANSACTION CANCELLED EXTERNALLY.
      25754  |   | REVERSAL ALREADY PERFORMED
      33477  |   | PAYMENT TRANSACTION ALREADY CANCELLED OR REFUNDED
      33478  |   | PAYMENT TRANSACTION ALREADY TOTALLY CANCELLED OR REFUNDED
      33479  |   | PAYMENT TRANSACTION EXPIRED.
      25888  |   | PARTIAL REVERSAL DISALLOWED
      33869  |   | PAYMENT REVERSAL DENIAL DUE TO CAPTURE PROCESSED
      39041  |   | DUPLICATE REQUEST ERROR
      09659  |   | CC REVERSAL HAS BEEN LOCKED FOR THIS CARD BY ISSUEING BANK
      33034  |   | OUT OF REFUND PERIOD
      33562  |   | PAYMENT PARTIAL REFUND NOT ALLOWED
      33548  |   | PAYMENT PARTIAL CAPTURE NOT ALLOWED
       6617  |   | REFUND AMOUNT GREATER THAN SALE
      42048  |   | UNABLE TO PROCESS REFUND - PARENT OPERATION ID REQUIRED 
      30366  |   | TRANSACTION ABORTED
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      Payment was invalid:
        errors:
          - code: 33474
            title: PAYMENT TRANSACTION CANCELLED EXTERNALLY.
  error-response-422:
    description: "**422 Unprocessable Entity error.** Generic error linked to unprocessable request. Please find below a non-exhaustive list of errors:\n\ncode   | - | title\n------:|:-:|:-\n00011  |   | \tUNABLE TO PROCESS\n01304  |   |  CREDIT CARD NOT ACCEPTED\n"
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      CREDIT CARD NOT ACCEPTED:
        errors:
          - code: 1304
            title: CREDIT CARD NOT ACCEPTED
  error-response-424:
    description: |
      **424 Failed Dependency error.** Generic error linked to 3rd party functional rejection. Please find below a non-exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      04751  |   | INVALID CARD
      33480  |   | PAYMENT TRANSACTION DECLINED. SUSPECTED FRAUD
      12678  |   | CC SECURITY ID DOES NOT MATCH
      04223  |   | NAME MISMATCH
      12550  |   | AUTHORISATION DENIED INSUFFICIENT FUNDS
      34869  |   | CREDIT CARD DENIAL - INCORRECT PIN
      34477  |   | REVERSAL NOT PERFORMED
      33471  |   | PAYMENT ACTION DECLINED
      40004  |   | UNABLE TO PROCESS REFUND - PROCESS MANUALLY
      65222  |   | PAYMENT REQUIRES 3D SECURE
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      PAYMENT ACTION DECLINED:
        errors:
          - code: 33471
            title: PAYMENT ACTION DECLINED
  error-response-500:
    description: |
      **500 Internal Server Error error.** Generic Amadeus internal error. Please find below a non-exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      00974  |   | SYSTEM UNAVAILABLE
      00414  |   | INTERNAL PROCESSING ERROR
      02894  |   | ERROR MESSAGE NOT FOUND
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      ERROR MESSAGE NOT FOUND:
        errors:
          - code: 2894
            title: ERROR MESSAGE NOT FOUND
  error-response-502:
    description: |
      **502 Bad Gateway error.** Generic communication error downstream. Please find below a non-exhaustive list of errors:

      code   | - | title
      ------:|:-:|:-
      33457  |   | COMMUNICATION ERROR - PLEASE TRY AGAIN LATER
      5038   |   | TIMEOUT ERROR UNKNOWN
      31787  |   | ISSUER NOT AVAILABLE
      33503  |   | PAYMENT SERVICE PROVIDER SYSTEM ERROR
    schema:
      $ref: '#/definitions/ErrorResponse'
    examples:
      ISSUER NOT AVAILABLE:
        errors:
          - code: 31787
            title: ISSUER NOT AVAILABLE
  error-response:
    description: |
      **Standard error.Generic Error (Can be used if HTTP Status Code doesn't match with defined error Codes for now).
      code   | - | title
        ------:|:-:|:-
        00492  |   | ERROR
    schema:
      $ref: '#/definitions/ErrorResponse' 
